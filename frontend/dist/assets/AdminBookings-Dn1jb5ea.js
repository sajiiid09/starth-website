import{R as x,j as e,B as m,I as j,a as g,L as v,bY as p}from"./index-KrjukJeb.js";import{f as y}from"./MagnifyingGlass.es-Dx2DBm8Z.js";import{C as N,c as f}from"./card-tLMu1Ov7.js";import{T as C,a as E,b as u,c as t,d as A,e as r}from"./table-CgrnP4CQ.js";import{u as D}from"./useAdminQuery-gkE_Vin9.js";import{a as T}from"./adminService-C8aRWX_T.js";const R=[{label:"All"},{label:"Created",value:"CREATED"},{label:"Ready for payment",value:"READY_FOR_PAYMENT"},{label:"Active",value:"ACTIVE"},{label:"Completed",value:"COMPLETED"},{label:"Canceled",value:"CANCELED"}],w={CREATED:"bg-slate-100 text-slate-700 border-slate-200",VENDOR_APPROVED:"bg-blue-100 text-blue-700 border-blue-200",COUNTERED:"bg-violet-100 text-violet-700 border-violet-200",READY_FOR_PAYMENT:"bg-amber-100 text-amber-700 border-amber-200",ACTIVE:"bg-cyan-100 text-cyan-700 border-cyan-200",COMPLETED:"bg-emerald-100 text-emerald-700 border-emerald-200",CANCELED:"bg-red-100 text-red-700 border-red-200"},S=s=>s.replace(/_/g," ").toLowerCase(),L=s=>new Date(s).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}),B=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(s/100),O=()=>e.jsx("div",{className:"space-y-3",children:Array.from({length:6}).map((s,o)=>e.jsx("div",{className:"grid grid-cols-6 gap-3",children:Array.from({length:6}).map((n,c)=>e.jsx(p,{className:"h-8 w-full"},c))},o))}),z=()=>{const[s,o]=x.useState(void 0),[n,c]=x.useState(""),{data:l,isLoading:i,error:d,refetch:h}=D(()=>T.listBookings({status:s,q:n||void 0}),[s,n]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-brand-teal",children:"Finance"}),e.jsx("h1",{className:"mt-3 text-3xl font-semibold text-gray-900",children:"Bookings overview"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Monitor booking lifecycle and drill into finance summary."})]}),e.jsx(N,{className:"border-none shadow-soft",children:e.jsxs(f,{className:"space-y-4 p-6",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:R.map(a=>{const b=a.value===s||!a.value&&!s;return e.jsx(m,{variant:b?"default":"outline",size:"sm",onClick:()=>o(a.value),children:a.label},a.label)})}),e.jsxs("div",{className:"relative w-full md:w-80",children:[e.jsx(y,{className:"pointer-events-none absolute left-3 top-1/2 size-4 -translate-y-1/2 text-gray-400"}),e.jsx(j,{placeholder:"Search bookings",className:"pl-9",value:n,onChange:a=>c(a.target.value)})]}),i&&e.jsx(O,{}),!i&&d&&e.jsxs("div",{className:"rounded-xl border border-red-100 bg-red-50 p-4 text-sm text-red-700",children:["Failed to load bookings. ",d.message,e.jsx(m,{variant:"outline",className:"mt-3",onClick:()=>void h(),children:"Retry"})]}),!i&&!d&&(!l||l.length===0)&&e.jsx("div",{className:"rounded-xl border border-gray-200 bg-gray-50 p-8 text-center text-sm text-gray-600",children:"No bookings found for this filter."}),!i&&!d&&l&&l.length>0&&e.jsxs(C,{children:[e.jsx(E,{children:e.jsxs(u,{children:[e.jsx(t,{children:"Booking ID"}),e.jsx(t,{children:"Organizer"}),e.jsx(t,{children:"Vendor"}),e.jsx(t,{children:"Date"}),e.jsx(t,{children:"Amount"}),e.jsx(t,{children:"Status"}),e.jsx(t,{className:"text-right",children:"View"})]})}),e.jsx(A,{children:l.map(a=>e.jsxs(u,{children:[e.jsx(r,{className:"font-medium",children:a.id}),e.jsx(r,{children:a.organizerName}),e.jsx(r,{children:a.vendorName}),e.jsx(r,{children:L(a.startsAt)}),e.jsx(r,{children:B(a.totalAmountCents)}),e.jsx(r,{children:e.jsx(g,{variant:"outline",className:w[a.state],children:S(a.state)})}),e.jsx(r,{className:"text-right",children:e.jsx(m,{asChild:!0,size:"sm",variant:"outline",children:e.jsx(v,{to:`/admin/bookings/${a.id}`,children:"View"})})})]},a.id))})]})]})})]})};export{z as default};
