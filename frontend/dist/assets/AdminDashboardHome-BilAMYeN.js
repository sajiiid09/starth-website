import{r as e,p as Z,n as M,aA as E,j as a,y as w,B as L,K as S}from"./index-KrjukJeb.js";import{c as F}from"./Warning.es-BeHDD-et.js";import{C as x,c as h}from"./card-tLMu1Ov7.js";import{a as u}from"./adminService-C8aRWX_T.js";const C=new Map([["bold",e.createElement(e.Fragment,null,e.createElement("path",{d:"M234.36,170A12,12,0,0,1,230,186.37l-96,56a12,12,0,0,1-12.1,0l-96-56a12,12,0,0,1,12.09-20.74l90,52.48L218,165.63A12,12,0,0,1,234.36,170ZM218,117.63,128,170.11,38.05,117.63A12,12,0,0,0,26,138.37l96,56a12,12,0,0,0,12.1,0l96-56A12,12,0,0,0,218,117.63ZM20,80a12,12,0,0,1,6-10.37l96-56a12.06,12.06,0,0,1,12.1,0l96,56a12,12,0,0,1,0,20.74l-96,56a12,12,0,0,1-12.1,0l-96-56A12,12,0,0,1,20,80Zm35.82,0L128,122.11,200.18,80,128,37.89Z"}))],["duotone",e.createElement(e.Fragment,null,e.createElement("path",{d:"M224,80l-96,56L32,80l96-56Z",opacity:"0.2"}),e.createElement("path",{d:"M230.91,172A8,8,0,0,1,228,182.91l-96,56a8,8,0,0,1-8.06,0l-96-56A8,8,0,0,1,36,169.09l92,53.65,92-53.65A8,8,0,0,1,230.91,172ZM220,121.09l-92,53.65L36,121.09A8,8,0,0,0,28,134.91l96,56a8,8,0,0,0,8.06,0l96-56A8,8,0,1,0,220,121.09ZM24,80a8,8,0,0,1,4-6.91l96-56a8,8,0,0,1,8.06,0l96,56a8,8,0,0,1,0,13.82l-96,56a8,8,0,0,1-8.06,0l-96-56A8,8,0,0,1,24,80Zm23.88,0L128,126.74,208.12,80,128,33.26Z"}))],["fill",e.createElement(e.Fragment,null,e.createElement("path",{d:"M220,169.09l-92,53.65L36,169.09A8,8,0,0,0,28,182.91l96,56a8,8,0,0,0,8.06,0l96-56A8,8,0,1,0,220,169.09Z"}),e.createElement("path",{d:"M220,121.09l-92,53.65L36,121.09A8,8,0,0,0,28,134.91l96,56a8,8,0,0,0,8.06,0l96-56A8,8,0,1,0,220,121.09Z"}),e.createElement("path",{d:"M28,86.91l96,56a8,8,0,0,0,8.06,0l96-56a8,8,0,0,0,0-13.82l-96-56a8,8,0,0,0-8.06,0l-96,56a8,8,0,0,0,0,13.82Z"}))],["light",e.createElement(e.Fragment,null,e.createElement("path",{d:"M229.18,173a6,6,0,0,1-2.16,8.2l-96,56a6,6,0,0,1-6,0l-96-56a6,6,0,0,1,6-10.36l93,54.23,93-54.23A6,6,0,0,1,229.18,173ZM221,122.82l-93,54.23L35,122.82a6,6,0,0,0-6,10.36l96,56a6,6,0,0,0,6,0l96-56a6,6,0,0,0-6-10.36ZM26,80a6,6,0,0,1,3-5.18l96-56a6,6,0,0,1,6,0l96,56a6,6,0,0,1,0,10.36l-96,56a6,6,0,0,1-6,0l-96-56A6,6,0,0,1,26,80Zm17.91,0L128,129.05,212.09,80,128,31Z"}))],["regular",e.createElement(e.Fragment,null,e.createElement("path",{d:"M230.91,172A8,8,0,0,1,228,182.91l-96,56a8,8,0,0,1-8.06,0l-96-56A8,8,0,0,1,36,169.09l92,53.65,92-53.65A8,8,0,0,1,230.91,172ZM220,121.09l-92,53.65L36,121.09A8,8,0,0,0,28,134.91l96,56a8,8,0,0,0,8.06,0l96-56A8,8,0,1,0,220,121.09ZM24,80a8,8,0,0,1,4-6.91l96-56a8,8,0,0,1,8.06,0l96,56a8,8,0,0,1,0,13.82l-96,56a8,8,0,0,1-8.06,0l-96-56A8,8,0,0,1,24,80Zm23.88,0L128,126.74,208.12,80,128,33.26Z"}))],["thin",e.createElement(e.Fragment,null,e.createElement("path",{d:"M227.45,174a4,4,0,0,1-1.44,5.48l-96,56a4,4,0,0,1-4,0l-96-56a4,4,0,0,1,4-6.92l94,54.83,94-54.83A4,4,0,0,1,227.45,174ZM222,124.54l-94,54.83L34,124.54a4,4,0,0,0-4,6.92l96,56a4,4,0,0,0,4,0l96-56a4,4,0,0,0-4-6.92ZM28,80a4,4,0,0,1,2-3.46l96-56a4,4,0,0,1,4,0l96,56a4,4,0,0,1,0,6.92l-96,56a4,4,0,0,1-4,0l-96-56A4,4,0,0,1,28,80Zm11.94,0L128,131.37,216.06,80,128,28.63Z"}))]]),g=e.forwardRef((l,i)=>e.createElement(Z,{ref:i,...l,weights:C}));g.displayName="StackIcon";const D=g,I=()=>{const[l,i]=e.useState(null),[f,m]=e.useState(0),[o,d]=e.useState([]),[y,v]=e.useState(!0);e.useEffect(()=>{async function t(){try{const n=await u.getFinanceOverview(),p=n==null?void 0:n.counts;p&&i(p);try{const s=await S("GET","/api/templates",{auth:!0}),c=(s==null?void 0:s.data)??s??[];m(Array.isArray(c)?c.length:0)}catch{m(0)}try{const s=await u.listVendors({status:"PENDING"}),c=[],b=(s==null?void 0:s.venues)??[];for(const r of b)c.push({id:r.id,name:r.name,type:"venue",city:r.city??""});const N=(s==null?void 0:s.service_providers)??[];for(const r of N)c.push({id:r.id,name:r.business_name,type:"service_provider",city:r.city??""});d(c)}catch{d([])}}catch(n){console.error("Failed to load admin dashboard data:",n)}finally{v(!1)}}t()},[]);const A=((l==null?void 0:l.venues)??0)+((l==null?void 0:l.service_providers)??0),j=[{label:"Total users",value:(l==null?void 0:l.users)??0,icon:M},{label:"Active vendors",value:A,icon:E},{label:"Templates",value:f,icon:D},{label:"Pending approvals",value:o.length,icon:F}];return y?a.jsx("div",{className:"flex h-64 items-center justify-center",children:a.jsx(w,{className:"size-8 animate-spin text-brand-teal"})}):a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-brand-teal",children:"Admin Dashboard"}),a.jsx("h1",{className:"mt-3 text-3xl font-semibold text-gray-900",children:"System overview"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Monitor activity, approvals, and platform performance."})]}),a.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:j.map(t=>{const n=t.icon;return a.jsx(x,{className:"border-none shadow-soft",children:a.jsxs(h,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-sm text-gray-500",children:t.label}),a.jsx(n,{className:"size-4 text-brand-teal"})]}),a.jsx("p",{className:"mt-3 text-3xl font-semibold text-gray-900",children:t.value.toLocaleString()})]})},t.label)})}),a.jsx(x,{className:"border-none shadow-soft",children:a.jsxs(h,{className:"p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Moderation queue"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Review vendor onboarding and template submissions."}),a.jsx("div",{className:"mt-6 grid gap-3",children:o.length===0?a.jsx("p",{className:"py-4 text-center text-sm text-gray-400",children:"No pending approvals right now."}):o.map(t=>a.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-gray-100 bg-white px-4 py-3",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-gray-800",children:t.name}),a.jsxs("span",{className:"ml-2 text-xs text-gray-400",children:[t.type==="venue"?"Venue":"Service Provider",t.city?` â€” ${t.city}`:""]})]}),a.jsx(L,{variant:"outline",className:"rounded-full text-xs",children:"Review"})]},t.id))})]})})]})};export{I as default};
