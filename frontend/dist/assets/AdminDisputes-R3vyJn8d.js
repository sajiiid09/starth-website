import{R as h,j as e,B as o,a as u,L as j,bY as b}from"./index-KrjukJeb.js";import{C as g,c as p}from"./card-tLMu1Ov7.js";import{T as v,a as N,b as c,c as l,d as f,e as d}from"./table-CgrnP4CQ.js";import{u as y}from"./useAdminQuery-gkE_Vin9.js";import{a as E}from"./adminService-C8aRWX_T.js";const R=[{label:"All"},{label:"Open",value:"OPEN"},{label:"Under review",value:"UNDER_REVIEW"},{label:"Resolved",value:"RESOLVED"}],C={OPEN:"bg-red-100 text-red-700 border-red-200",UNDER_REVIEW:"bg-amber-100 text-amber-700 border-amber-200",RESOLVED:"bg-emerald-100 text-emerald-700 border-emerald-200",REJECTED:"bg-slate-100 text-slate-700 border-slate-200"},w=a=>new Date(a).toLocaleString(void 0,{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}),D=()=>e.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((a,i)=>e.jsx("div",{className:"grid grid-cols-6 gap-3",children:Array.from({length:6}).map((r,t)=>e.jsx(b,{className:"h-8 w-full"},t))},i))}),A=()=>{const[a,i]=h.useState(void 0),{data:r,isLoading:t,error:n,refetch:x}=y(()=>E.listDisputes({status:a}),[a]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-brand-teal",children:"Control Plane"}),e.jsx("h1",{className:"mt-3 text-3xl font-semibold text-gray-900",children:"Disputes"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Resolve disputes and hold related payouts when risk signals appear."})]}),e.jsx(g,{className:"border-none shadow-soft",children:e.jsxs(p,{className:"space-y-4 p-6",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:R.map(s=>{const m=s.value===a||!s.value&&!a;return e.jsx(o,{variant:m?"default":"outline",size:"sm",onClick:()=>i(s.value),children:s.label},s.label)})}),t&&e.jsx(D,{}),!t&&n&&e.jsxs("div",{className:"rounded-xl border border-red-100 bg-red-50 p-4 text-sm text-red-700",children:["Failed to load disputes. ",n.message,e.jsx(o,{variant:"outline",className:"mt-3",onClick:()=>void x(),children:"Retry"})]}),!t&&!n&&(!r||r.length===0)&&e.jsx("div",{className:"rounded-xl border border-gray-200 bg-gray-50 p-8 text-center text-sm text-gray-600",children:"No disputes found."}),!t&&!n&&r&&r.length>0&&e.jsxs(v,{children:[e.jsx(N,{children:e.jsxs(c,{children:[e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Booking ID"}),e.jsx(l,{children:"Vendor ID"}),e.jsx(l,{children:"Reason"}),e.jsx(l,{children:"Created"}),e.jsx(l,{className:"text-right",children:"View"})]})}),e.jsx(f,{children:r.map(s=>e.jsxs(c,{children:[e.jsx(d,{children:e.jsx(u,{variant:"outline",className:C[s.status],children:s.status.toLowerCase().replace(/_/g," ")})}),e.jsx(d,{children:s.bookingId}),e.jsx(d,{children:s.vendorId}),e.jsx(d,{className:"max-w-[380px] truncate",title:s.reason,children:s.reason}),e.jsx(d,{children:w(s.createdAt)}),e.jsx(d,{className:"text-right",children:e.jsx(o,{asChild:!0,size:"sm",variant:"outline",children:e.jsx(j,{to:`/admin/disputes/${s.id}`,children:"View"})})})]},s.id))})]})]})})]})};export{A as default};
