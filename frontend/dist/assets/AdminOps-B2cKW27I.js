import{R as x,c8 as S,j as e,c9 as k,bX as i,ca as T,cb as E,B as h,t as a}from"./index-KrjukJeb.js";import{c as p}from"./Warning.es-BeHDD-et.js";import{C as r,a as o,b as l,c}from"./card-tLMu1Ov7.js";import{u as j,A as u,a as g,b as f,c as y,d as b,e as N,f as C,g as R}from"./useAdminMutation-jiVJ-Wgr.js";import{a as v}from"./adminService-C8aRWX_T.js";const P=()=>{const[A,t]=x.useState(!1),[D,n]=x.useState(!1),d=j(()=>v.opsResetDummyData()),m=j(()=>v.opsReconcileDummyPayments()),w=async()=>{try{const s=await d.mutate(void 0);a.success(`Demo data reset at ${new Date(s.resetAt).toLocaleTimeString()}`),t(!1)}catch(s){a.error(s instanceof Error?s.message:"Failed to seed demo data")}},O=async()=>{try{const s=await m.mutate(void 0);a.success(`Reconciled ${s.paymentId} â†’ ${s.status.toLowerCase()}`),n(!1)}catch(s){a.error(s instanceof Error?s.message:"Failed to run reconciliation")}};return S?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-brand-teal",children:"Control Plane"}),e.jsxs("h1",{className:"mt-3 flex items-center gap-2 text-3xl font-semibold text-gray-900",children:[e.jsx(k,{className:"size-7"}),"Ops tools"]}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Use with caution. These operations mutate in-memory dummy finance state."})]}),e.jsxs(r,{className:"border-amber-200 bg-amber-50",children:[e.jsx(o,{children:e.jsx(l,{className:"text-lg text-amber-900",children:"High-impact actions"})}),e.jsxs(c,{className:"space-y-3 text-sm text-amber-900",children:[e.jsx("p",{children:"These tools are for demo/support workflows only."}),e.jsx("p",{children:"Each action requires confirmation and writes to audit logs."}),i&&e.jsx("p",{className:"font-semibold",children:"Read-only mode is enabled. All ops actions are disabled."})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[T&&e.jsxs(r,{className:"border-none shadow-soft",children:[e.jsx(o,{children:e.jsx(l,{className:"text-lg",children:"Seed demo data"})}),e.jsxs(c,{className:"space-y-3 text-sm text-gray-700",children:[e.jsx("p",{children:"Resets vendors, bookings, payments, payouts, disputes, and logs to default dummy snapshots."}),e.jsx(h,{variant:"destructive",onClick:()=>t(!0),disabled:d.isLoading||i,children:"Seed demo data"})]})]}),E&&e.jsxs(r,{className:"border-none shadow-soft",children:[e.jsx(o,{children:e.jsx(l,{className:"text-lg",children:"Run reconciliation"})}),e.jsxs(c,{className:"space-y-3 text-sm text-gray-700",children:[e.jsx("p",{children:"Simulates reconciliation by correcting one random payment and writing a reconciliation audit event."}),e.jsx(h,{variant:"outline",onClick:()=>n(!0),disabled:m.isLoading||i,children:"Run reconciliation"})]})]})]}),e.jsx(u,{open:A,onOpenChange:t,children:e.jsxs(g,{children:[e.jsxs(f,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(p,{className:"size-4 text-red-600"}),"Reset all demo datasets?"]}),e.jsx(b,{children:"This will overwrite all in-memory dummy admin state for the current session."})]}),e.jsxs(N,{children:[e.jsx(C,{children:"Cancel"}),e.jsx(R,{onClick:()=>void w(),children:"Confirm reset"})]})]})}),e.jsx(u,{open:D,onOpenChange:n,children:e.jsxs(g,{children:[e.jsxs(f,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(p,{className:"size-4 text-amber-600"}),"Run reconciliation now?"]}),e.jsx(b,{children:"This simulates a reconciliation correction on one payment for demo purposes."})]}),e.jsxs(N,{children:[e.jsx(C,{children:"Cancel"}),e.jsx(R,{onClick:()=>void O(),children:"Run reconciliation"})]})]})})]}):e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-brand-teal",children:"Control Plane"}),e.jsx("h1",{className:"mt-3 text-3xl font-semibold text-gray-900",children:"Ops tools"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Ops tools are disabled by feature flags."})]})})};export{P as default};
