import{R as m,j as e,B as x,I as j,a as p,bY as g}from"./index-KrjukJeb.js";import{f as v}from"./MagnifyingGlass.es-Dx2DBm8Z.js";import{C as N,c as f}from"./card-tLMu1Ov7.js";import{T as C,a as E,b as u,c as r,d as y,e as t}from"./table-CgrnP4CQ.js";import{u as S}from"./useAdminQuery-gkE_Vin9.js";import{a as R}from"./adminService-C8aRWX_T.js";const T=[{label:"All"},{label:"Needs method",value:"REQUIRES_PAYMENT_METHOD"},{label:"Needs confirmation",value:"REQUIRES_CONFIRMATION"},{label:"Processing",value:"PROCESSING"},{label:"Succeeded",value:"SUCCEEDED"},{label:"Corrected",value:"CORRECTED"},{label:"Canceled",value:"CANCELED"}],I={REQUIRES_PAYMENT_METHOD:"bg-slate-100 text-slate-700 border-slate-200",REQUIRES_CONFIRMATION:"bg-amber-100 text-amber-700 border-amber-200",PROCESSING:"bg-blue-100 text-blue-700 border-blue-200",SUCCEEDED:"bg-emerald-100 text-emerald-700 border-emerald-200",CORRECTED:"bg-purple-100 text-purple-700 border-purple-200",CANCELED:"bg-red-100 text-red-700 border-red-200"},D=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(s/100),A=s=>new Date(s).toLocaleString(void 0,{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}),O=s=>s.replace(/_/g," ").toLowerCase(),P=()=>e.jsx("div",{className:"space-y-3",children:Array.from({length:6}).map((s,c)=>e.jsx("div",{className:"grid grid-cols-6 gap-3",children:Array.from({length:6}).map((n,i)=>e.jsx(g,{className:"h-8 w-full"},i))},c))}),M=()=>{const[s,c]=m.useState(void 0),[n,i]=m.useState(""),{data:l,isLoading:d,error:o,refetch:b}=S(()=>R.listPayments({status:s,q:n||void 0}),[s,n]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-brand-teal",children:"Finance"}),e.jsx("h1",{className:"mt-3 text-3xl font-semibold text-gray-900",children:"Payments"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Track payment intent health before funds are released."})]}),e.jsx(N,{className:"border-none shadow-soft",children:e.jsxs(f,{className:"space-y-4 p-6",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:T.map(a=>{const h=a.value===s||!a.value&&!s;return e.jsx(x,{variant:h?"default":"outline",size:"sm",onClick:()=>c(a.value),children:a.label},a.label)})}),e.jsxs("div",{className:"relative w-full md:w-80",children:[e.jsx(v,{className:"pointer-events-none absolute left-3 top-1/2 size-4 -translate-y-1/2 text-gray-400"}),e.jsx(j,{placeholder:"Search by payment, booking, provider ref",className:"pl-9",value:n,onChange:a=>i(a.target.value)})]}),d&&e.jsx(P,{}),!d&&o&&e.jsxs("div",{className:"rounded-xl border border-red-100 bg-red-50 p-4 text-sm text-red-700",children:["Failed to load payments. ",o.message,e.jsx(x,{variant:"outline",className:"mt-3",onClick:()=>void b(),children:"Retry"})]}),!d&&!o&&(!l||l.length===0)&&e.jsx("div",{className:"rounded-xl border border-gray-200 bg-gray-50 p-8 text-center text-sm text-gray-600",children:"No payments found."}),!d&&!o&&l&&l.length>0&&e.jsxs(C,{children:[e.jsx(E,{children:e.jsxs(u,{children:[e.jsx(r,{children:"Payment ID"}),e.jsx(r,{children:"Booking ID"}),e.jsx(r,{children:"Amount"}),e.jsx(r,{children:"Status"}),e.jsx(r,{children:"Created"}),e.jsx(r,{children:"Provider ref"})]})}),e.jsx(y,{children:l.map(a=>e.jsxs(u,{children:[e.jsx(t,{className:"font-medium",children:a.id}),e.jsx(t,{children:a.bookingId}),e.jsx(t,{children:D(a.amountCents)}),e.jsx(t,{children:e.jsx(p,{variant:"outline",className:I[a.status],children:O(a.status)})}),e.jsx(t,{children:A(a.createdAt)}),e.jsx(t,{className:"font-mono text-xs",children:a.providerRef})]},a.id))})]})]})})]})};export{M as default};
