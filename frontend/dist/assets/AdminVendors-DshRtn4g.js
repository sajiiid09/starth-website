import{R as x,j as e,I as f,B as g,a as y,L as v,bY as r}from"./index-KrjukJeb.js";import{f as S}from"./MagnifyingGlass.es-Dx2DBm8Z.js";import{C as E,c as A}from"./card-tLMu1Ov7.js";import{T as D,a as T,b as j,c as l,d as w,e as n}from"./table-CgrnP4CQ.js";import{T as C,a as L,b as P}from"./tabs-BVUoMm7C.js";import{u as V}from"./useAdminQuery-gkE_Vin9.js";import{a as I}from"./adminService-C8aRWX_T.js";const B=[{label:"Pending",value:"PENDING"},{label:"Approved",value:"APPROVED"},{label:"Needs Changes",value:"NEEDS_CHANGES"},{label:"Disabled Payout",value:"DISABLED_PAYOUT"},{label:"All",value:"ALL"}],R=a=>a==="VENUE_OWNER"?"Venue Owner":"Service Provider",_=a=>a==="NEEDS_CHANGES"?"Needs changes":a==="DISABLED_PAYOUT"?"Disabled payout":a.charAt(0)+a.slice(1).toLowerCase(),G={PENDING:"bg-amber-100 text-amber-700 border-amber-200",APPROVED:"bg-emerald-100 text-emerald-700 border-emerald-200",NEEDS_CHANGES:"bg-orange-100 text-orange-700 border-orange-200",DISABLED_PAYOUT:"bg-red-100 text-red-700 border-red-200"},O=a=>new Date(a).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}),k=()=>e.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((a,c)=>e.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[e.jsx(r,{className:"h-8 w-full"}),e.jsx(r,{className:"h-8 w-full"}),e.jsx(r,{className:"h-8 w-full"}),e.jsx(r,{className:"h-8 w-full"}),e.jsx(r,{className:"h-8 w-full"})]},c))}),M=()=>{const[a,c]=x.useState("PENDING"),[d,N]=x.useState(""),u=a==="ALL"?void 0:a,{data:h,isLoading:i,error:o,refetch:p}=V(()=>I.listVendors({status:u}),[u]),m=x.useMemo(()=>{const s=h??[],b=d.trim().toLowerCase();return b?s.filter(t=>[t.displayName,t.contactName,t.contactEmail,t.city,t.state].join(" ").toLowerCase().includes(b)):s},[h,d]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-brand-teal",children:"Vendors"}),e.jsx("h1",{className:"mt-3 text-3xl font-semibold text-gray-900",children:"Vendor verification"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Review onboarding submissions and control payout eligibility."})]}),e.jsx(E,{className:"border-none shadow-soft",children:e.jsxs(A,{className:"space-y-4 p-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[e.jsx(C,{value:a,onValueChange:s=>c(s),children:e.jsx(L,{className:"flex h-auto flex-wrap gap-1 bg-gray-100 p-1",children:B.map(s=>e.jsx(P,{value:s.value,className:"text-xs sm:text-sm",children:s.label},s.value))})}),e.jsxs("div",{className:"relative w-full lg:w-80",children:[e.jsx(S,{className:"pointer-events-none absolute left-3 top-1/2 size-4 -translate-y-1/2 text-gray-400"}),e.jsx(f,{value:d,onChange:s=>N(s.target.value),placeholder:"Search vendors",className:"pl-9"})]})]}),i&&e.jsx(k,{}),!i&&o&&e.jsxs("div",{className:"rounded-xl border border-red-100 bg-red-50 p-4 text-sm text-red-700",children:[e.jsxs("p",{children:["Unable to load vendor queue. ",o.message]}),e.jsx(g,{variant:"outline",className:"mt-3",onClick:()=>void p(),children:"Try again"})]}),!i&&!o&&m.length===0&&e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-gray-50 p-8 text-center",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-900",children:a==="PENDING"?"No pending vendors":"No vendors found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Try adjusting your filter or search query."})]}),!i&&!o&&m.length>0&&e.jsxs(D,{children:[e.jsx(T,{children:e.jsxs(j,{children:[e.jsx(l,{children:"Vendor name"}),e.jsx(l,{children:"Subtype"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Created"}),e.jsx(l,{className:"text-right",children:"Action"})]})}),e.jsx(w,{children:m.map(s=>e.jsxs(j,{children:[e.jsx(n,{className:"font-medium text-gray-900",children:s.displayName}),e.jsx(n,{children:R(s.subtype)}),e.jsx(n,{children:e.jsx(y,{variant:"outline",className:G[s.verificationState],children:_(s.verificationState)})}),e.jsx(n,{children:O(s.createdAt)}),e.jsx(n,{className:"text-right",children:e.jsx(g,{asChild:!0,variant:"outline",size:"sm",children:e.jsx(v,{to:`/admin/vendors/${s.id}`,children:"View"})})})]},s.id))})]})]})})]})};export{M as default};
