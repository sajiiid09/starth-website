import{q,aI as M,r as d,t as m,e as x,V,j as e,y as L,L as k,B as g,$ as W,a2 as z,O as t,I as n,Q as I,W as P,X as R,Y as U,Z as b,T as G,d as O,n as K,aj as Q}from"./index-KrjukJeb.js";import{C as p,a as j,b as y,c as _}from"./card-tLMu1Ov7.js";import{C as A}from"./checkbox-uGjIcrta.js";import{n as X}from"./Camera.es-CbxhcNz5.js";import{m as Y}from"./CurrencyDollar.es-CPzZPXmX.js";import{m as Z}from"./FloppyDisk.es-BgK92nk8.js";import{R as E}from"./RoleGuard-DRkcvV5M.js";import{V as $}from"./VenuePortalLayout-DFmbwPeC.js";import"./Envelope.es-BErI3QgS.js";import"./Shield.es-C51nR2_i.js";const J=[{value:"conference_meeting",label:"Conference & Meeting Space"},{value:"event_hall_ballroom",label:"Event Hall & Ballroom"},{value:"gallery_museum",label:"Gallery & Museum"},{value:"rooftop_outdoor",label:"Rooftop & Outdoor Space"},{value:"restaurant_bar",label:"Restaurant & Bar"},{value:"hotel_banquet",label:"Hotel & Banquet Hall"},{value:"theater_auditorium",label:"Theater & Auditorium"},{value:"loft_studio_warehouse",label:"Loft, Studio & Warehouse"},{value:"university_campus",label:"University & Campus"}],ee=["WiFi","Parking","AV Equipment","Catering Kitchen","Bar Service","Dance Floor","Stage","Outdoor Space","Air Conditioning","Heating","Wheelchair Accessible","Coat Check","Security","Valet Parking","Piano","Sound System","Projector","Microphones","Lighting System"],ae=["wedding","corporate","conference","party","networking","gala","fundraiser","product launch","training","seminar","celebration"];function xe(){const u=q(),f=M(),[h,D]=d.useState(null),[B,C]=d.useState(!0),[N,w]=d.useState(!1),[se,re]=d.useState(!1),[s,v]=d.useState({name:"",category:"",description:"",tags:[],address:"",city:"",state:"",country:"US",postal_code:"",capacity_min:"",capacity_max:"",amenities:[],layouts:[],hero_photo_url:"",gallery_urls:[],base_rate:"",hourly_rate:"",cleaning_fee:"",security_deposit:"",website:""});d.useEffect(()=>{const i=new URLSearchParams(f.search).get("id");i?D(i):(m.error("No venue ID provided."),u(x("VenueListings")))},[f.search,u]);const S=d.useCallback(async()=>{var a,i,c,o;if(h){C(!0);try{const r=await V.get(h);v({name:r.name||"",category:r.category||"",description:r.description||"",tags:r.tags||[],address:r.address||"",city:r.city||"",state:r.state||"",country:r.country||"US",postal_code:r.postal_code||"",capacity_min:r.capacity_min||"",capacity_max:r.capacity_max||"",amenities:r.amenities||[],layouts:r.layouts||[],hero_photo_url:r.hero_photo_url||"",gallery_urls:r.gallery_urls||[],base_rate:((a=r.rate_card_json)==null?void 0:a.base_rate)||"",hourly_rate:((i=r.rate_card_json)==null?void 0:i.hourly_rate)||"",cleaning_fee:((c=r.rate_card_json)==null?void 0:c.cleaning_fee)||"",security_deposit:((o=r.rate_card_json)==null?void 0:o.security_deposit)||"",website:r.website||""})}catch(r){console.error("Error fetching venue data:",r),m.error("Failed to load venue data."),u(x("VenueListings"))}C(!1)}},[h,u]);d.useEffect(()=>{S()},[S]);const l=(a,i)=>{v(c=>({...c,[a]:i}))},F=(a,i)=>{v(c=>({...c,[a]:c[a].includes(i)?c[a].filter(o=>o!==i):[...c[a],i]}))},H=a=>{v(i=>({...i,gallery_urls:i.gallery_urls.filter((c,o)=>o!==a)}))},T=async()=>{if(!h){m.error("Venue ID is missing.");return}w(!0);try{const a={name:s.name,category:s.category,description:s.description,tags:s.tags,hero_photo_url:s.hero_photo_url,gallery_urls:s.gallery_urls,capacity_min:s.capacity_min?parseInt(s.capacity_min):null,capacity_max:s.capacity_max?parseInt(s.capacity_max):null,amenities:s.amenities,layouts:s.layouts,address:s.address,city:s.city,state:s.state,country:s.country,postal_code:s.postal_code,website:s.website,rate_card_json:{base_rate:s.base_rate?parseFloat(s.base_rate):null,hourly_rate:s.hourly_rate?parseFloat(s.hourly_rate):null,cleaning_fee:s.cleaning_fee?parseFloat(s.cleaning_fee):null,security_deposit:s.security_deposit?parseFloat(s.security_deposit):null}};await V.update(h,a),m.success("Venue updated successfully!"),u(x("VenueListings"))}catch(a){console.error("Error saving venue:",a),m.error("Failed to save venue. Please check the form and try again.")}w(!1)};return B?e.jsx(E,{requiredRole:"venue_owner",children:e.jsx($,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(L,{className:"w-8 h-8 animate-spin text-gray-500"})})})}):e.jsx(E,{requiredRole:"venue_owner",children:e.jsx($,{children:e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(k,{to:x("VenueListings"),children:e.jsx(g,{variant:"ghost",size:"icon",children:e.jsx(W,{className:"w-5 h-5"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Venue"}),e.jsxs("p",{className:"text-gray-600",children:["Update details for ",s.name]})]})]}),e.jsxs(p,{className:"border-none shadow-lg mb-6",children:[e.jsx(j,{children:e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-5 h-5 text-blue-600"}),"Basic Information"]})}),e.jsxs(_,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"name",children:"Venue Name *"}),e.jsx(n,{id:"name",value:s.name,onChange:a=>l("name",a.target.value)})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"category",children:"Venue Category *"}),e.jsxs(I,{value:s.category,onValueChange:a=>l("category",a),children:[e.jsx(P,{children:e.jsx(R,{})}),e.jsx(U,{children:J.map(a=>e.jsx(b,{value:a.value,children:a.label},a.value))})]})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"description",children:"Description *"}),e.jsx(G,{id:"description",value:s.description,onChange:a=>l("description",a.target.value),rows:4})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Event Types"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 mt-2",children:ae.map(a=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{id:`tag-${a}`,checked:s.tags.includes(a),onCheckedChange:()=>F("tags",a)}),e.jsx(t,{htmlFor:`tag-${a}`,className:"capitalize cursor-pointer",children:a})]},a))})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"website",children:"Website"}),e.jsx(n,{id:"website",type:"url",value:s.website,onChange:a=>l("website",a.target.value)})]})]})]}),e.jsxs(p,{className:"border-none shadow-lg mb-6",children:[e.jsx(j,{children:e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5 text-green-600"}),"Location"]})}),e.jsxs(_,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"address",children:"Street Address *"}),e.jsx(n,{id:"address",value:s.address,onChange:a=>l("address",a.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"city",children:"City *"}),e.jsx(n,{id:"city",value:s.city,onChange:a=>l("city",a.target.value)})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"state",children:"State *"}),e.jsx(n,{id:"state",value:s.state,onChange:a=>l("state",a.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"postal_code",children:"Postal Code"}),e.jsx(n,{id:"postal_code",value:s.postal_code,onChange:a=>l("postal_code",a.target.value)})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"country",children:"Country *"}),e.jsxs(I,{value:s.country,onValueChange:a=>l("country",a),children:[e.jsx(P,{children:e.jsx(R,{})}),e.jsxs(U,{children:[e.jsx(b,{value:"US",children:"United States"}),e.jsx(b,{value:"CA",children:"Canada"})]})]})]})]})]})]}),e.jsxs(p,{className:"border-none shadow-lg mb-6",children:[e.jsx(j,{children:e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5 text-orange-600"}),"Capacity & Features"]})}),e.jsxs(_,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"capacity_min",children:"Minimum Capacity *"}),e.jsx(n,{id:"capacity_min",type:"number",value:s.capacity_min,onChange:a=>l("capacity_min",a.target.value)})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"capacity_max",children:"Maximum Capacity *"}),e.jsx(n,{id:"capacity_max",type:"number",value:s.capacity_max,onChange:a=>l("capacity_max",a.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Amenities & Features"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 mt-2",children:ee.map(a=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{id:`amenity-${a}`,checked:s.amenities.includes(a),onCheckedChange:()=>F("amenities",a)}),e.jsx(t,{htmlFor:`amenity-${a}`,className:"cursor-pointer text-sm",children:a})]},a))})]})]})]}),e.jsxs(p,{className:"border-none shadow-lg mb-6",children:[e.jsx(j,{children:e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5 text-purple-600"}),"Photos"]})}),e.jsxs(_,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(t,{children:"Hero Photo URL"}),e.jsx(n,{value:s.hero_photo_url,onChange:a=>l("hero_photo_url",a.target.value),placeholder:"https://images.unsplash.com/photo-1524230659092-07f99a75c013?w=1200&h=800&fit=crop"}),s.hero_photo_url&&e.jsx("img",{src:s.hero_photo_url,alt:"Hero preview",className:"w-full h-48 object-cover rounded-lg mt-2"})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Gallery Photos"}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Add or remove photo URLs."}),e.jsx("div",{className:"space-y-2",children:s.gallery_urls.map((a,i)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{value:a,onChange:c=>{const o=[...s.gallery_urls];o[i]=c.target.value,l("gallery_urls",o)}}),e.jsx(g,{variant:"destructive",size:"icon",onClick:()=>H(i),children:e.jsx(Q,{className:"w-4 h-4"})})]},i))}),e.jsx(g,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>l("gallery_urls",[...s.gallery_urls,""]),children:"Add Photo URL"})]})]})]}),e.jsxs(p,{className:"border-none shadow-lg mb-6",children:[e.jsx(j,{children:e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"w-5 h-5 text-red-600"}),"Pricing"]})}),e.jsxs(_,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"base_rate",children:"Base Rate (per event) *"}),e.jsx(n,{id:"base_rate",type:"number",value:s.base_rate,onChange:a=>l("base_rate",a.target.value)})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"hourly_rate",children:"Hourly Rate"}),e.jsx(n,{id:"hourly_rate",type:"number",value:s.hourly_rate,onChange:a=>l("hourly_rate",a.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"cleaning_fee",children:"Cleaning Fee"}),e.jsx(n,{id:"cleaning_fee",type:"number",value:s.cleaning_fee,onChange:a=>l("cleaning_fee",a.target.value)})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"security_deposit",children:"Security Deposit"}),e.jsx(n,{id:"security_deposit",type:"number",value:s.security_deposit,onChange:a=>l("security_deposit",a.target.value)})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-8",children:[e.jsx(k,{to:x("VenueListings"),children:e.jsx(g,{variant:"outline",children:"Cancel"})}),e.jsxs(g,{onClick:T,disabled:N,className:"bg-blue-600 hover:bg-blue-700",children:[N?e.jsx(L,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})})})}export{xe as default};
