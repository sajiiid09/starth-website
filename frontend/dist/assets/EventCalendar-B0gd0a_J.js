import{r as d,U as z,a3 as F,j as e,B as m,L as S,e as M,a4 as H,ba as G,Q as I,W as Q,X as R,Y as X,Z as b,a as k}from"./index-KrjukJeb.js";import{C as f,a as $,c as T,b as Y}from"./card-tLMu1Ov7.js";import{n as Z}from"./ArrowSquareOut.es-DnFjawrD.js";import{c as O,a as q,l as A,f as U,i as J}from"./isSameMonth-Ccyd4klX.js";import{s as K}from"./Funnel.es-DlaRNzF0.js";import{t as p,e as ee}from"./en-US-B77o_Iq_.js";import{c as se}from"./constructNow-VLTKr-vB.js";function te(n,v){const a=p(n.start),c=p(n.end);let o=+a>+c;const h=o?+a:+c,r=o?c:a;r.setHours(0,0,0,0);let u=1;const i=[];for(;+r<=h;)i.push(p(r)),r.setDate(r.getDate()+u),r.setHours(0,0,0,0);return o?i.reverse():i}function ae(n){return O(n,se(n))}function me(){const[n,v]=d.useState([]),[a,c]=d.useState(new Date),[o,h]=d.useState("month"),[r,u]=d.useState(!0);d.useEffect(()=>{i()},[]);const i=async()=>{try{const s=await z.me(),t=await F.filter({organizer_id:s.id});v(t)}catch(s){console.error("Error fetching events:",s)}u(!1)},N=s=>{c(t=>{const l=new Date(t);return l.setMonth(t.getMonth()+s),l})},W=s=>n.filter(t=>t.date_start&&O(new Date(t.date_start),s)),B=()=>{window.open("https://calendar.google.com/calendar/u/0/r","_blank")},g=q(a),j=ee(a),L=te({start:g,end:j}),P=g.getDay(),V=j.getDay(),y=[];for(let s=P-1;s>=0;s--){const t=new Date(g);t.setDate(t.getDate()-(s+1)),y.push(t)}const w=[];for(let s=1;s<=6-V;s++){const t=new Date(j);t.setDate(t.getDate()+s),w.push(t)}const _=[...y,...L,...w],D=s=>{const t={draft:"bg-gray-100 text-gray-800",planning:"bg-blue-100 text-blue-800",published:"bg-green-100 text-green-800",booked:"bg-purple-100 text-purple-800",completed:"bg-emerald-100 text-emerald-800",cancelled:"bg-red-100 text-red-800"};return t[s]||t.draft};return r?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Event Calendar"}),e.jsx("p",{className:"text-lg text-gray-600",children:"View all your events in calendar format"})]}),e.jsxs("div",{className:"flex gap-2 mt-4 md:mt-0",children:[e.jsxs(m,{onClick:B,variant:"outline",children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Export to Google"]}),e.jsx(S,{to:M("CreateEvent"),children:e.jsxs(m,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"New Event"]})})]})]}),e.jsx(f,{className:"border-none shadow-lg mb-6",children:e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(m,{variant:"outline",size:"icon",onClick:()=>N(-1),children:e.jsx(A,{className:"w-4 h-4"})}),e.jsx("h2",{className:"text-2xl font-bold",children:U(a,"MMMM yyyy")}),e.jsx(m,{variant:"outline",size:"icon",onClick:()=>N(1),children:e.jsx(G,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(I,{value:o,onValueChange:h,children:[e.jsx(Q,{className:"w-32",children:e.jsx(R,{})}),e.jsxs(X,{children:[e.jsx(b,{value:"month",children:"Month"}),e.jsx(b,{value:"week",children:"Week"}),e.jsx(b,{value:"day",children:"Day"})]})]}),e.jsxs(m,{variant:"outline",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Filter"]})]})]})})}),e.jsx(f,{className:"border-none shadow-lg",children:e.jsxs(T,{className:"p-0",children:[e.jsx("div",{className:"grid grid-cols-7 border-b",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(s=>e.jsx("div",{className:"p-4 text-center font-medium text-gray-700 bg-gray-50",children:s},s))}),e.jsx("div",{className:"grid grid-cols-7",children:_.map((s,t)=>{const l=W(s),C=J(s,a),E=ae(s);return e.jsxs("div",{className:`min-h-32 p-2 border-b border-r ${C?"bg-white":"bg-gray-50"} ${E?"bg-blue-50":""}`,children:[e.jsx("div",{className:`text-sm font-medium mb-2 ${C?"text-gray-900":"text-gray-400"} ${E?"text-blue-600":""}`,children:U(s,"d")}),e.jsxs("div",{className:"space-y-1",children:[l.slice(0,3).map(x=>e.jsx(S,{to:M(`EventDetails?id=${x.id}`),className:"block",children:e.jsx("div",{className:"text-xs p-1 rounded truncate hover:shadow-sm transition-shadow cursor-pointer",children:e.jsx(k,{className:`${D(x.status)} text-xs px-1 py-0.5`,children:x.title})})},x.id)),l.length>3&&e.jsxs("div",{className:"text-xs text-gray-500 px-1",children:["+",l.length-3," more"]})]})]},t)})})]})}),e.jsxs(f,{className:"border-none shadow-lg mt-6",children:[e.jsx($,{children:e.jsx(Y,{className:"text-lg",children:"Status Legend"})}),e.jsx(T,{children:e.jsx("div",{className:"flex flex-wrap gap-3",children:[{status:"draft",label:"Draft"},{status:"planning",label:"Planning"},{status:"published",label:"Published"},{status:"booked",label:"Booked"},{status:"completed",label:"Completed"},{status:"cancelled",label:"Cancelled"}].map(({status:s,label:t})=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(k,{className:D(s),children:t})},s))})})]})]})})}export{me as default};
