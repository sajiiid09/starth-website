import{r as a,p as V,af as M,j as e,I as _,Q as H,W as L,X as U,Y as F,Z as y,B as E,a as S,U as B,e as A,_ as P,t as $,y as R,L as D,$ as Y,ag as O,n as k,N as q,d as z,a3 as G}from"./index-KrjukJeb.js";import{C as g,a as u,b as v,c as p}from"./card-tLMu1Ov7.js";import{T as K,a as Q,b as w,c as C}from"./tabs-BVUoMm7C.js";import W from"./EventMarketingDashboard-l3oXxL38.js";import{c as X}from"./Envelope.es-BErI3QgS.js";import{m as J}from"./CurrencyDollar.es-CPzZPXmX.js";import{c as ee}from"./Megaphone.es-D8bZMuf1.js";import"./ArrowSquareOut.es-DnFjawrD.js";import"./Palette.es-BP6DLU_5.js";import"./Lightning.es-C6ha7DO9.js";import"./Upload.es-Dw-8j3Wc.js";import"./DotsThreeVertical.es-xONz4iHU.js";import"./Pencil.es-DgXKeFuK.js";import"./Trash.es-DHM9Kd3t.js";import"./Download.es-JIbIWCs_.js";import"./Image.es-DRogyeU7.js";import"./popover-BG0fWMNa.js";import"./isSameMonth-Ccyd4klX.js";import"./en-US-B77o_Iq_.js";import"./differenceInCalendarMonths-DCHHw2al.js";import"./Clock.es-CCh8QZyI.js";import"./PaperPlaneTilt.es-DXYVSOD_.js";const ae=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M256,136a12,12,0,0,1-12,12h-8v8a12,12,0,0,1-24,0v-8h-8a12,12,0,0,1,0-24h8v-8a12,12,0,0,1,24,0v8h8A12,12,0,0,1,256,136Zm-54.81,56.28a12,12,0,1,1-18.38,15.44C169.12,191.42,145,172,108,172c-28.89,0-55.46,12.68-74.81,35.72a12,12,0,0,1-18.38-15.44A124.08,124.08,0,0,1,63.5,156.53a72,72,0,1,1,89,0A124,124,0,0,1,201.19,192.28ZM108,148a48,48,0,1,0-48-48A48.05,48.05,0,0,0,108,148Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M168,100a60,60,0,1,1-60-60A60,60,0,0,1,168,100Z",opacity:"0.2"}),a.createElement("path",{d:"M256,136a8,8,0,0,1-8,8H232v16a8,8,0,0,1-16,0V144H200a8,8,0,0,1,0-16h16V112a8,8,0,0,1,16,0v16h16A8,8,0,0,1,256,136Zm-57.87,58.85a8,8,0,0,1-12.26,10.3C165.75,181.19,138.09,168,108,168s-57.75,13.19-77.87,37.15a8,8,0,0,1-12.25-10.3c14.94-17.78,33.52-30.41,54.17-37.17a68,68,0,1,1,71.9,0C164.6,164.44,183.18,177.07,198.13,194.85ZM108,152a52,52,0,1,0-52-52A52.06,52.06,0,0,0,108,152Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M256,136a8,8,0,0,1-8,8H232v16a8,8,0,0,1-16,0V144H200a8,8,0,0,1,0-16h16V112a8,8,0,0,1,16,0v16h16A8,8,0,0,1,256,136ZM144,157.68a68,68,0,1,0-71.9,0c-20.65,6.76-39.23,19.39-54.17,37.17A8,8,0,0,0,24,208H192a8,8,0,0,0,6.13-13.15C183.18,177.07,164.6,164.44,144,157.68Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M254,136a6,6,0,0,1-6,6H230v18a6,6,0,0,1-12,0V142H200a6,6,0,0,1,0-12h18V112a6,6,0,0,1,12,0v18h18A6,6,0,0,1,254,136Zm-57.41,60.14a6,6,0,1,1-9.18,7.72C166.9,179.45,138.69,166,108,166s-58.89,13.45-79.41,37.86a6,6,0,0,1-9.18-7.72C35.14,177.41,55,164.48,77,158.25a66,66,0,1,1,62,0C161,164.48,180.86,177.41,196.59,196.14ZM108,154a54,54,0,1,0-54-54A54.06,54.06,0,0,0,108,154Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M256,136a8,8,0,0,1-8,8H232v16a8,8,0,0,1-16,0V144H200a8,8,0,0,1,0-16h16V112a8,8,0,0,1,16,0v16h16A8,8,0,0,1,256,136Zm-57.87,58.85a8,8,0,0,1-12.26,10.3C165.75,181.19,138.09,168,108,168s-57.75,13.19-77.87,37.15a8,8,0,0,1-12.25-10.3c14.94-17.78,33.52-30.41,54.17-37.17a68,68,0,1,1,71.9,0C164.6,164.44,183.18,177.07,198.13,194.85ZM108,152a52,52,0,1,0-52-52A52.06,52.06,0,0,0,108,152Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M252,136a4,4,0,0,1-4,4H228v20a4,4,0,0,1-8,0V140H200a4,4,0,0,1,0-8h20V112a4,4,0,0,1,8,0v20h20A4,4,0,0,1,252,136Zm-56.94,61.43a4,4,0,0,1-6.12,5.14C168,177.7,139.3,164,108,164s-60,13.7-80.94,38.57a4,4,0,1,1-6.12-5.14c16.71-19.9,38.13-33.13,61.89-38.59a64,64,0,1,1,50.34,0C156.93,164.3,178.35,177.53,195.06,197.43ZM108,156a56,56,0,1,0-56-56A56.06,56.06,0,0,0,108,156Z"}))]]),I=a.forwardRef((s,o)=>a.createElement(V,{ref:o,...s,weights:ae}));I.displayName="UserPlusIcon";const te=I;function se({eventId:s,eventTitle:o}){const[c,d]=a.useState([]),[j,b]=a.useState(!0),[x,m]=a.useState(!1),[r,n]=a.useState({email:"",role:"editor"}),i=a.useCallback(async()=>{try{const t=await M.filter({event_id:s});d(t)}catch(t){console.error("Error loading collaborators:",t)}b(!1)},[s]);a.useEffect(()=>{i()},[i]);const h=async t=>{if(t.preventDefault(),!!r.email){m(!0);try{const l=await B.me(),Z=Math.random().toString(36).substring(2)+Date.now().toString(36);await M.create({event_id:s,inviter_id:l.id,collaborator_email:r.email,role:r.role,invitation_token:Z});const T=`${window.location.origin}${A(`AcceptCollaboration?token=${Z}`)}`;await P({to:r.email,subject:`You've been invited to collaborate on "${o}"`,body:`
${l.full_name||l.email} has invited you to collaborate on the event "${o}".

Your role: ${r.role.charAt(0).toUpperCase()+r.role.slice(1)}

Click here to accept the invitation:
${T}

If you don't have a Strathwell account, you'll be able to create one during the process.

Best regards,
The Strathwell Team
        `,from_name:"Strathwell Events"}),$.success("Invitation sent successfully!"),n({email:"",role:"editor"}),i()}catch(l){console.error("Error sending invitation:",l),$.error("Failed to send invitation")}m(!1)}},f=t=>({editor:"bg-blue-100 text-blue-800",viewer:"bg-gray-100 text-gray-800",coordinator:"bg-purple-100 text-purple-800"})[t]||"bg-gray-100 text-gray-800",N=t=>({pending:"bg-yellow-100 text-yellow-800",accepted:"bg-green-100 text-green-800",declined:"bg-red-100 text-red-800"})[t]||"bg-gray-100 text-gray-800";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(g,{className:"border-none shadow-lg",children:[e.jsx(u,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5 text-blue-600"}),"Invite Collaborator"]})}),e.jsx(p,{children:e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(_,{type:"email",placeholder:"colleague@company.com",value:r.email,onChange:t=>n(l=>({...l,email:t.target.value})),required:!0})}),e.jsxs(H,{value:r.role,onValueChange:t=>n(l=>({...l,role:t})),children:[e.jsx(L,{children:e.jsx(U,{})}),e.jsxs(F,{children:[e.jsx(y,{value:"viewer",children:"Viewer - Can view event details"}),e.jsx(y,{value:"editor",children:"Editor - Can edit event details"}),e.jsx(y,{value:"coordinator",children:"Coordinator - Full access"})]})]})]}),e.jsx(E,{type:"submit",disabled:x,className:"bg-blue-600 hover:bg-blue-700",children:x?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Send Invitation"]})})]})})]}),e.jsxs(g,{className:"border-none shadow-lg",children:[e.jsx(u,{children:e.jsxs(v,{children:["Team Members (",c.length,")"]})}),e.jsx(p,{children:c.length>0?e.jsx("div",{className:"space-y-3",children:c.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.collaborator_email}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Invited ",new Date(t.created_date).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:f(t.role),children:t.role.charAt(0).toUpperCase()+t.role.slice(1)}),e.jsx(S,{className:N(t.status),children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]})]},t.id))}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No collaborators yet. Invite team members to work together on this event."})})]})]})}function Se(){var m;const[s,o]=a.useState(null),[c,d]=a.useState(!0),[j,b]=a.useState(null);a.useEffect(()=>{(async()=>{d(!0);const i=new URLSearchParams(window.location.search).get("id");if(b(i),!i){d(!1);return}try{const f=(await G.filter()).find(N=>N.id===i);o(f)}catch(h){console.error("Error loading event data:",h)}d(!1)})()},[]);const x=r=>{const n={draft:"bg-gray-100 text-gray-800",planning:"bg-blue-100 text-blue-800",booked:"bg-green-100 text-green-800",completed:"bg-purple-100 text-purple-800",cancelled:"bg-red-100 text-red-800"};return n[r]||n.draft};return c?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx(R,{className:"w-8 h-8 animate-spin text-gray-500"})}):s?e.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:e.jsxs("div",{className:"flex items-center gap-4 mb-4 md:mb-0",children:[e.jsx(D,{to:A("Dashboard"),children:e.jsx(E,{variant:"ghost",size:"icon",children:e.jsx(Y,{className:"w-5 h-5"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s.title}),e.jsx(S,{className:x(s.status),children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]})]})}),e.jsxs(K,{defaultValue:"overview",className:"w-full",children:[e.jsxs(Q,{className:"grid w-full grid-cols-3 max-w-lg mb-6",children:[e.jsxs(w,{value:"overview",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Overview"]}),e.jsxs(w,{value:"collaboration",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Team"]})," ",e.jsxs(w,{value:"marketing",children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Marketing"]})]}),e.jsx(C,{value:"overview",children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs(g,{className:"border-none shadow-lg",children:[e.jsx(u,{children:e.jsx(v,{children:"Event Overview"})}),e.jsx(p,{children:e.jsx("p",{className:"text-gray-600",children:s.description||"No description provided."})})]})}),e.jsx("div",{children:e.jsxs(g,{className:"border-none shadow-lg",children:[e.jsx(u,{children:e.jsx(v,{children:"Key Details"})}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{className:"w-5 h-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Date"}),e.jsx("p",{className:"text-sm text-gray-600",children:new Date(s.date_start).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(z,{className:"w-5 h-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Location"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.city})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(k,{className:"w-5 h-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Guests"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.guest_count," expected"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{className:"w-5 h-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Budget"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["$",(m=s.budget_target)==null?void 0:m.toLocaleString()]})]})]})]})]})})]})}),e.jsxs(C,{value:"collaboration",children:[" ",e.jsx(se,{eventId:j,eventTitle:s.title})]}),e.jsx(C,{value:"marketing",children:e.jsx(W,{eventId:j})})]})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:e.jsxs("div",{className:"max-w-2xl mx-auto text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Event Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The event you're looking for doesn't exist or has been removed."}),e.jsx(D,{to:A("Dashboard"),children:e.jsx(E,{variant:"outline",children:"Back to Dashboard"})})]})})}export{Se as default};
