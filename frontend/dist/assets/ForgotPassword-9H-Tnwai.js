import{q,r,j as e,$ as L,bw as R,O as x,I as m,B as f,y as j,at as N,bx as B,aq as D,by as y,t,bv as I}from"./index-KrjukJeb.js";function O(){const h=q(),[o,b]=r.useState("email"),[l,n]=r.useState(!1),[d,v]=r.useState(""),[u,k]=r.useState(""),[i,P]=r.useState(""),[p,C]=r.useState(""),[c,S]=r.useState(!1),F=async s=>{s.preventDefault(),n(!0);try{await y({email:d}),t.success("If that email exists, a reset code has been sent."),b("reset")}catch{t.error("Something went wrong. Please try again.")}n(!1)},E=async s=>{var w,g;if(s.preventDefault(),i!==p){t.error("Passwords don't match");return}if(i.length<8){t.error("Password must be at least 8 characters");return}n(!0);try{const{data:a}=await I({email:d,otp_code:u,new_password:i});a.success&&(t.success("Password reset successfully!"),h("/appentry"))}catch(a){t.error(((g=(w=a==null?void 0:a.response)==null?void 0:w.data)==null?void 0:g.error)||(a==null?void 0:a.message)||"Password reset failed. Please check your code and try again.")}n(!1)};return e.jsx("div",{className:"min-h-screen bg-[#F8F7F4] flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-[420px] space-y-6",children:[e.jsxs("button",{type:"button",className:"group flex items-center gap-2 text-xs font-semibold uppercase tracking-widest text-brand-dark/40 hover:text-brand-teal transition-colors",onClick:()=>{o==="reset"?b("email"):h("/appentry")},children:[e.jsx(L,{className:"h-3 w-3 group-hover:-translate-x-1 transition-transform"}),o==="reset"?"Back":"Back to login"]}),e.jsx("div",{className:"rounded-3xl border border-white/60 bg-white/80 p-1 shadow-2xl shadow-brand-dark/5 backdrop-blur-xl",children:e.jsxs("div",{className:"rounded-[20px] border border-brand-dark/5 bg-white/50 p-6 sm:p-8",children:[o==="email"&&e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsx("div",{className:"mx-auto flex h-14 w-14 items-center justify-center rounded-2xl bg-brand-teal/10",children:e.jsx(R,{className:"h-7 w-7 text-brand-teal"})}),e.jsx("h2",{className:"text-2xl font-bold tracking-tight text-brand-dark",children:"Forgot your password?"}),e.jsx("p",{className:"text-sm text-brand-dark/60",children:"Enter your email and we'll send you a 6-digit code to reset your password."})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(x,{htmlFor:"forgotEmail",className:"text-xs font-semibold uppercase tracking-wider text-brand-dark/60",children:"Email Address"}),e.jsx(m,{id:"forgotEmail",type:"email",placeholder:"name@company.com",required:!0,className:"h-12 border-brand-dark/10 bg-white/60 text-base focus:border-brand-teal focus:ring-brand-teal/20",value:d,onChange:s=>v(s.target.value)})]}),e.jsx(f,{type:"submit",className:"group w-full rounded-full bg-brand-teal py-6 text-base font-semibold text-white shadow-lg transition-all hover:bg-brand-dark hover:shadow-xl hover:translate-y-[-1px]",disabled:l,children:l?e.jsx(j,{className:"h-5 w-5 animate-spin"}):e.jsxs("span",{className:"flex items-center gap-2",children:["Send Reset Code",e.jsx(N,{className:"h-4 w-4 transition-transform group-hover:translate-x-1"})]})})]}),o==="reset"&&e.jsxs("form",{onSubmit:E,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight text-brand-dark",children:"Reset your password"}),e.jsxs("p",{className:"text-sm text-brand-dark/60",children:["Enter the 6-digit code sent to"," ",e.jsx("span",{className:"font-semibold text-brand-teal",children:d})," ","and your new password."]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(x,{htmlFor:"otpCode",className:"text-xs font-semibold uppercase tracking-wider text-brand-dark/60",children:"Verification Code"}),e.jsx(m,{id:"otpCode",type:"text",inputMode:"numeric",placeholder:"000000",required:!0,minLength:6,maxLength:6,className:"h-12 border-brand-dark/10 bg-white/60 text-center text-xl font-bold tracking-[0.3em] focus:border-brand-teal focus:ring-brand-teal/20",value:u,onChange:s=>k(s.target.value.replace(/\D/g,"").slice(0,6))})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(x,{htmlFor:"newPassword",className:"text-xs font-semibold uppercase tracking-wider text-brand-dark/60",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(m,{id:"newPassword",type:c?"text":"password",required:!0,minLength:8,className:"h-12 border-brand-dark/10 bg-white/60 text-base focus:border-brand-teal focus:ring-brand-teal/20 pr-10",value:i,onChange:s=>P(s.target.value)}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-brand-dark/40 hover:text-brand-dark transition-colors",onClick:()=>S(s=>!s),"aria-label":c?"Hide password":"Show password",children:c?e.jsx(B,{className:"h-5 w-5"}):e.jsx(D,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(x,{htmlFor:"confirmPassword",className:"text-xs font-semibold uppercase tracking-wider text-brand-dark/60",children:"Confirm Password"}),e.jsx(m,{id:"confirmPassword",type:c?"text":"password",required:!0,minLength:8,className:"h-12 border-brand-dark/10 bg-white/60 text-base focus:border-brand-teal focus:ring-brand-teal/20",value:p,onChange:s=>C(s.target.value)})]}),e.jsx(f,{type:"submit",className:"group w-full rounded-full bg-brand-teal py-6 text-base font-semibold text-white shadow-lg transition-all hover:bg-brand-dark hover:shadow-xl hover:translate-y-[-1px]",disabled:l,children:l?e.jsx(j,{className:"h-5 w-5 animate-spin"}):e.jsxs("span",{className:"flex items-center gap-2",children:["Reset Password",e.jsx(N,{className:"h-4 w-4 transition-transform group-hover:translate-x-1"})]})}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",className:"text-xs font-medium text-brand-teal hover:text-brand-dark transition-colors",onClick:()=>{n(!0),y({email:d}).then(()=>t.success("New code sent!")).catch(()=>t.error("Failed to resend code.")).finally(()=>n(!1))},children:"Didn't receive a code? Resend"})})]})]})})]})})}export{O as default};
