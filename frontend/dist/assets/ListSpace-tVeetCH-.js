import{r as n,j as e,b as F,L as g,e as j,B as d,$ as k,O as r,I as o,n as U,T as D,A as L,U as A,V as P}from"./index-KrjukJeb.js";import{C as v,c as b,a as _,b as $}from"./card-tLMu1Ov7.js";import{C as B}from"./checkbox-uGjIcrta.js";import{n as I}from"./Camera.es-CbxhcNz5.js";import{m as R}from"./CurrencyDollar.es-CPzZPXmX.js";import{s as T}from"./Upload.es-Dw-8j3Wc.js";const E=["WiFi","Parking","Kitchen","AV Equipment","Air Conditioning","Natural Light","Outdoor Space","Security","Accessibility","Storage","Loading Dock","Bar Setup","Stage","Dance Floor","Photo Studio Setup","Green Screen","Dressing Room"];function G(){const[a,h]=n.useState({name:"",address:"",city:"",state:"",capacity:"",base_rate:"",description:"",amenities:[],photos:[]}),[m,p]=n.useState(!1),[x,u]=n.useState(!1),[f,y]=n.useState(!1),i=(s,t)=>{h(l=>({...l,[s]:t}))},N=s=>{h(t=>({...t,amenities:t.amenities.includes(s)?t.amenities.filter(l=>l!==s):[...t.amenities,s]}))},C=async s=>{const t=Array.from(s.target.files);p(!0);try{const l=t.map(c=>L({file:c})),w=(await Promise.all(l)).map(c=>c.file_url);h(c=>({...c,photos:[...c.photos,...w]}))}catch(l){console.error("Upload error:",l)}p(!1)},S=async()=>{if(!(!a.name||!a.address||!a.city)){u(!0);try{const s=await A.me(),t={...a,owner_id:s.id,country:"USA",capacity:parseInt(a.capacity),base_rate:parseFloat(a.base_rate),verified:!1,insurance_verified:!1,rating:4.5,status:"pending"};await P.create(t),y(!0)}catch(s){console.error("Submit error:",s)}u(!1)}};return f?e.jsx("div",{className:"min-h-screen bg-gray-50 p-4 flex items-center justify-center",children:e.jsx(v,{className:"max-w-md w-full text-center",children:e.jsxs(b,{className:"p-8",children:[e.jsx(F,{className:"w-16 h-16 text-green-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Space Listed!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your space is now under review. We'll notify you once it's approved and live on the marketplace."}),e.jsx(g,{to:j("Dashboard"),children:e.jsx(d,{className:"bg-blue-600 hover:bg-blue-700",children:"Back to Dashboard"})})]})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx(g,{to:j("Marketplace"),children:e.jsx(d,{variant:"ghost",size:"icon",children:e.jsx(k,{className:"w-5 h-5"})})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"List Your Space"})]}),e.jsxs(v,{className:"border-none shadow-lg",children:[e.jsx(_,{children:e.jsx($,{children:"Tell us about your space"})}),e.jsxs(b,{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"name",children:"Space Name"}),e.jsx(o,{id:"name",placeholder:"e.g. Beautiful Rooftop Loft",value:a.name,onChange:s=>i("name",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"address",children:"Address"}),e.jsx(o,{id:"address",placeholder:"Street address",value:a.address,onChange:s=>i("address",s.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"city",children:"City"}),e.jsx(o,{id:"city",placeholder:"City",value:a.city,onChange:s=>i("city",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"state",children:"State"}),e.jsx(o,{id:"state",placeholder:"State",value:a.state,onChange:s=>i("state",s.target.value)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"capacity",children:"Capacity"}),e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(o,{id:"capacity",type:"number",placeholder:"Max guests",value:a.capacity,onChange:s=>i("capacity",s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"rate",children:"Rate"}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(o,{id:"rate",type:"number",placeholder:"Per day",value:a.base_rate,onChange:s=>i("base_rate",s.target.value),className:"pl-10"})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"description",children:"Description"}),e.jsx(D,{id:"description",placeholder:"Describe your space, what makes it special...",value:a.description,onChange:s=>i("description",s.target.value),rows:4})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Amenities"}),e.jsx("div",{className:"grid grid-cols-2 gap-3 mt-3",children:E.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{id:`amenity-${s}`,checked:a.amenities.includes(s),onCheckedChange:()=>N(s)}),e.jsx(r,{htmlFor:`amenity-${s}`,className:"text-sm",children:s})]},s))})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Photos"}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors",children:[e.jsx(I,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Upload photos of your space"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:C,className:"hidden",id:"photo-upload"}),e.jsx(r,{htmlFor:"photo-upload",children:e.jsx(d,{variant:"outline",disabled:m,asChild:!0,children:e.jsxs("span",{children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),m?"Uploading...":"Choose Photos"]})})})]}),a.photos.length>0&&e.jsx("div",{className:"grid grid-cols-3 gap-2 mt-4",children:a.photos.map((s,t)=>e.jsx("img",{src:s,alt:`Upload ${t+1}`,className:"w-full h-20 object-cover rounded"},t))})]})]}),e.jsx("div",{className:"pt-6",children:e.jsx(d,{onClick:S,disabled:!a.name||!a.address||x,className:"w-full bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white py-3 text-lg font-semibold",children:x?"Submitting...":"List My Space"})})]})]})]})})}export{G as default};
