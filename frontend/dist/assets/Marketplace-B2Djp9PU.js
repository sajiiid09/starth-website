import{r as a,j as e,y as S,C as w,F as n,I as M,Q as I,W as C,X as F,Y as T,Z as d,P as E,c as P}from"./index-KrjukJeb.js";import{f as V}from"./MagnifyingGlass.es-Dx2DBm8Z.js";import{g as _,f as A,M as B}from"./marketplaceFilter-DA4jIt28.js";import{M as L}from"./MarketplaceFilters-CtsnU2oU.js";import{f as R,d as v}from"./marketplace-BopvY0-7.js";const W=()=>{const[c,m]=a.useState([]),[h,k]=a.useState(!0),[r,x]=a.useState(""),[u,p]=a.useState(""),[l,b]=a.useState({state:"",city:"",category:"",eventType:""}),[i,g]=a.useState("relevance");a.useEffect(()=>{async function t(){try{const j=await R();m(j.length>0?j:v)}catch{m(v)}finally{k(!1)}}t()},[]),a.useEffect(()=>{const t=window.setTimeout(()=>{p(r)},200);return()=>window.clearTimeout(t)},[r]);const s=a.useMemo(()=>r.trim().length>0||Object.values(l).some(t=>t.trim().length>0),[l,r]),f=a.useMemo(()=>_(c),[c]),o=a.useMemo(()=>s?A({items:c,searchQuery:u,filters:l,sortBy:i}):f,[c,u,f,l,s,i]),N=()=>{x(""),p(""),b({state:"",city:"",category:"",eventType:""}),g("relevance")},y=!h&&s&&o.length===0;return h?e.jsx("div",{className:"flex h-64 items-center justify-center pt-24",children:e.jsx(S,{className:"size-8 animate-spin text-brand-teal"})}):e.jsx("div",{className:"pb-24 pt-10",children:e.jsxs(w,{children:[e.jsxs(n,{className:"text-center",children:[e.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-brand-teal",children:"Marketplace"}),e.jsx("h1",{className:"mt-4 text-4xl font-semibold text-brand-dark md:text-5xl",children:"Marketplace Essentials"}),e.jsx("p",{className:"mt-4 text-base text-brand-dark/70 md:text-lg",children:"Discover venues, vendors, and production partners curated for standout events."})]}),e.jsx(n,{className:"mt-10",children:e.jsxs("div",{className:"rounded-3xl border border-white/40 bg-white/80 p-6 shadow-card backdrop-blur-xl",children:[e.jsxs("div",{className:"grid gap-4 lg:grid-cols-[1.4fr_0.8fr_0.6fr]",children:[e.jsxs("div",{className:"relative",children:[e.jsx(V,{className:"absolute left-4 top-1/2 h-4 w-4 -translate-y-1/2 text-brand-dark/40"}),e.jsx(M,{value:r,onChange:t=>x(t.target.value),placeholder:"Search venues, services, or locations",className:"h-11 rounded-full border-brand-dark/10 bg-brand-light/70 pl-10 text-brand-dark placeholder:text-brand-dark/40"})]}),e.jsxs(I,{value:i,onValueChange:t=>g(t),children:[e.jsx(C,{className:"h-11 rounded-full border-brand-dark/10 bg-brand-light/70 px-4 text-brand-dark",children:e.jsx(F,{placeholder:"Sort by"})}),e.jsxs(T,{className:"border-brand-dark/10 bg-white",children:[e.jsx(d,{value:"relevance",children:"Relevance"}),e.jsx(d,{value:"price_low",children:"Price (Low to High)"}),e.jsx(d,{value:"price_high",children:"Price (High to Low)"}),e.jsx(d,{value:"rating",children:"Rating"})]})]}),e.jsx(E,{size:"sm",variant:"ghost",className:P("min-h-[44px] w-full border border-brand-dark/10 text-brand-dark/70 hover:text-brand-dark",!s&&"opacity-60"),disabled:!s,onClick:N,children:"Clear filters"})]}),e.jsx("div",{className:"mt-6",children:e.jsx(L,{filters:l,setFilters:b,activeTab:"providers"})})]})}),e.jsx(n,{className:"mt-6",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 text-sm text-brand-dark/60",children:[e.jsx("span",{children:s?"Matching results":"Featured marketplace picks"}),s&&e.jsxs("span",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-brand-dark/50",children:[o.length," results"]})]})}),e.jsx(n,{className:"mt-8",staggerChildren:.08,childSelector:".marketplace-card",children:y?e.jsx("div",{className:"rounded-2xl border border-brand-dark/10 bg-brand-cream/40 p-6 text-center text-sm text-brand-dark/60",children:"No matches yet. Try adjusting the category, location, or search terms."}):e.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:o.map(t=>e.jsx("div",{className:"marketplace-card h-full",children:e.jsx(B,{item:t})},t.id))})})]})})};export{W as default};
