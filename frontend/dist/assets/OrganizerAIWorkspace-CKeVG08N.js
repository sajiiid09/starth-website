import{r as t,p as R,j as e,R as d,B as w,bD as he,bE as ue,bF as xe,bG as pe,T as J,bH as be,bI as ge,bJ as G,y as fe,a as _,s as U,bK as ve,ak as we,bq as je,al as Ne,am as Ae,an as ye,bL as ke,bM as Ee,g as He,h as Me,bN as Se}from"./index-KrjukJeb.js";import{n as Ze}from"./Lock.es-Dnfko-u-.js";const Ce=new Map([["bold",t.createElement(t.Fragment,null,t.createElement("path",{d:"M92.38,38.05A12,12,0,0,1,101,23.42a108,108,0,0,1,54,0,12,12,0,1,1-6,23.23,84.11,84.11,0,0,0-42,0A12,12,0,0,1,92.38,38.05ZM50.94,52.34a108.1,108.1,0,0,0-27,46.76,12,12,0,0,0,8.37,14.77,12.2,12.2,0,0,0,3.2.43,12,12,0,0,0,11.56-8.8,84,84,0,0,1,21-36.35A12,12,0,1,0,50.94,52.34Zm-3.88,98.14a12,12,0,0,0-23.12,6.42,108,108,0,0,0,27,46.78A12,12,0,0,0,68,186.85,84,84,0,0,1,47.06,150.48ZM149,209.35a84,84,0,0,1-42,0,12,12,0,1,0-6,23.23,108,108,0,0,0,54,0,12,12,0,1,0-6-23.23Zm74.72-67.22A12,12,0,0,0,209,150.5a84,84,0,0,1-21,36.35,12,12,0,0,0,17.12,16.82,108.19,108.19,0,0,0,27-46.77A12,12,0,0,0,223.71,142.13Zm-14.77-36.61a12,12,0,0,0,23.12-6.42,108,108,0,0,0-27-46.78A12,12,0,1,0,188,69.15,84,84,0,0,1,208.94,105.52Z"}))],["duotone",t.createElement(t.Fragment,null,t.createElement("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"}),t.createElement("path",{d:"M96.26,37A8,8,0,0,1,102,27.29a104.11,104.11,0,0,1,52,0,8,8,0,0,1-2,15.75,8.15,8.15,0,0,1-2-.26,88.09,88.09,0,0,0-44,0A8,8,0,0,1,96.26,37ZM53.79,55.14a104,104,0,0,0-26,45,8,8,0,1,0,15.42,4.26,87.91,87.91,0,0,1,22-38.08A8,8,0,0,0,53.79,55.14ZM43.21,151.55a8,8,0,1,0-15.42,4.28,104,104,0,0,0,26,45,8,8,0,1,0,11.41-11.21A88.14,88.14,0,0,1,43.21,151.55ZM150,213.22a88,88,0,0,1-44,0,8,8,0,1,0-4,15.49,104.11,104.11,0,0,0,52,0,8,8,0,0,0-4-15.49ZM222.65,146a8,8,0,0,0-9.85,5.57,87.88,87.88,0,0,1-22,38.09,8,8,0,1,0,11.42,11.21,104.05,104.05,0,0,0,26-45A8,8,0,0,0,222.65,146Zm-9.86-41.54a8,8,0,0,0,15.42-4.28,104,104,0,0,0-26-45,8,8,0,1,0-11.41,11.21A88.14,88.14,0,0,1,212.79,104.45Z"}))],["fill",t.createElement(t.Fragment,null,t.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm54.59,45a8,8,0,0,1,11.29.7,88,88,0,0,1,17.6,30.47,8,8,0,0,1-15.18,5.08,71.87,71.87,0,0,0-14.4-25A8,8,0,0,1,182.59,69ZM73.41,187.05a8,8,0,0,1-11.29-.7,88,88,0,0,1-17.6-30.47A8,8,0,1,1,59.7,150.8a71.87,71.87,0,0,0,14.4,24.95A8,8,0,0,1,73.41,187.05Zm.69-106.8a71.87,71.87,0,0,0-14.4,25,8,8,0,1,1-15.18-5.08,88,88,0,0,1,17.6-30.47,8,8,0,1,1,12,10.6Zm71.49,134a87.8,87.8,0,0,1-35.18,0,8,8,0,0,1,3.18-15.68,72.08,72.08,0,0,0,28.82,0,8,8,0,0,1,3.18,15.68Zm6.25-163A8,8,0,0,1,144,57.61a7.89,7.89,0,0,1-1.6-.16,72.08,72.08,0,0,0-28.82,0,8,8,0,1,1-3.18-15.68,87.92,87.92,0,0,1,35.18,0A8,8,0,0,1,151.84,51.2Zm59.64,104.68a88,88,0,0,1-17.6,30.47,8,8,0,1,1-12-10.6,71.87,71.87,0,0,0,14.4-24.95,8,8,0,0,1,15.18,5.08Z"}))],["light",t.createElement(t.Fragment,null,t.createElement("path",{d:"M98.19,36.54a6,6,0,0,1,4.3-7.31,102.12,102.12,0,0,1,51,0,6,6,0,0,1-3,11.62,90,90,0,0,0-45,0A6,6,0,0,1,98.19,36.54Zm-43,20A102.07,102.07,0,0,0,29.7,100.7a6,6,0,0,0,4.19,7.38,5.88,5.88,0,0,0,1.6.22,6,6,0,0,0,5.78-4.4A90,90,0,0,1,63.78,65a6,6,0,1,0-8.56-8.41ZM41.28,152.09a6,6,0,1,0-11.56,3.2,102,102,0,0,0,25.49,44.18,6,6,0,0,0,8.55-8.41A90.11,90.11,0,0,1,41.28,152.09Zm109.21,63.06a90,90,0,0,1-45,0,6,6,0,1,0-3,11.62,102.16,102.16,0,0,0,51,0,6,6,0,0,0-3-11.62Zm71.62-67.23a6,6,0,0,0-7.38,4.18,90,90,0,0,1-22.51,39,6,6,0,1,0,8.56,8.41A102.12,102.12,0,0,0,226.3,155.3,6,6,0,0,0,222.11,147.92Zm-7.39-44a6,6,0,0,0,5.78,4.4,5.88,5.88,0,0,0,1.6-.22,6,6,0,0,0,4.18-7.38,102,102,0,0,0-25.49-44.18,6,6,0,0,0-8.55,8.41A90.05,90.05,0,0,1,214.72,103.91Z"}))],["regular",t.createElement(t.Fragment,null,t.createElement("path",{d:"M96.26,37.05A8,8,0,0,1,102,27.29a104.11,104.11,0,0,1,52,0,8,8,0,0,1-2,15.75,8.15,8.15,0,0,1-2-.26,88.09,88.09,0,0,0-44,0A8,8,0,0,1,96.26,37.05ZM53.79,55.14a104.05,104.05,0,0,0-26,45,8,8,0,0,0,15.42,4.27,88,88,0,0,1,22-38.09A8,8,0,0,0,53.79,55.14ZM43.21,151.55a8,8,0,1,0-15.42,4.28,104.12,104.12,0,0,0,26,45,8,8,0,0,0,11.41-11.22A88.14,88.14,0,0,1,43.21,151.55ZM150,213.22a88,88,0,0,1-44,0,8,8,0,1,0-4,15.49,104.11,104.11,0,0,0,52,0,8,8,0,0,0-4-15.49ZM222.65,146a8,8,0,0,0-9.85,5.58,87.91,87.91,0,0,1-22,38.08,8,8,0,1,0,11.42,11.21,104,104,0,0,0,26-45A8,8,0,0,0,222.65,146Zm-9.86-41.54a8,8,0,0,0,15.42-4.28,104,104,0,0,0-26-45,8,8,0,1,0-11.41,11.22A88,88,0,0,1,212.79,104.45Z"}))],["thin",t.createElement(t.Fragment,null,t.createElement("path",{d:"M155.87,36.06a4,4,0,0,1-3.87,3,4.29,4.29,0,0,1-1-.13,92,92,0,0,0-46,0,4,4,0,0,1-2-7.74,100.09,100.09,0,0,1,50,0A4,4,0,0,1,155.87,36.06ZM56.65,57.94a100.18,100.18,0,0,0-25,43.29,4,4,0,0,0,7.71,2.14,92.06,92.06,0,0,1,23-39.82,4,4,0,1,0-5.7-5.61ZM39.36,152.62a4,4,0,0,0-7.71,2.14,100.08,100.08,0,0,0,25,43.31,4,4,0,1,0,5.71-5.61A91.91,91.91,0,0,1,39.36,152.62ZM151,217.09a92,92,0,0,1-46,0,4,4,0,0,0-2,7.75,100,100,0,0,0,50,0,4,4,0,1,0-2-7.74Zm70.58-67.25a4,4,0,0,0-4.92,2.79,92.12,92.12,0,0,1-23,39.82,4,4,0,1,0,5.7,5.61,100.18,100.18,0,0,0,25-43.29A4,4,0,0,0,221.58,149.84Zm-4.94-46.46a4,4,0,0,0,7.71-2.14,100.08,100.08,0,0,0-25-43.31,4,4,0,1,0-5.71,5.61A91.91,91.91,0,0,1,216.64,103.38Z"}))]]),Ve=new Map([["bold",t.createElement(t.Fragment,null,t.createElement("path",{d:"M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm0,192a84,84,0,1,1,84-84A84.09,84.09,0,0,1,128,212Zm44-64a32,32,0,0,1-32,32v4a12,12,0,0,1-24,0v-4H104a12,12,0,0,1,0-24h36a8,8,0,0,0,0-16H116a32,32,0,0,1,0-64V72a12,12,0,0,1,24,0v4h12a12,12,0,0,1,0,24H116a8,8,0,0,0,0,16h24A32,32,0,0,1,172,148Z"}))],["duotone",t.createElement(t.Fragment,null,t.createElement("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"}),t.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm40-68a28,28,0,0,1-28,28h-4v8a8,8,0,0,1-16,0v-8H104a8,8,0,0,1,0-16h36a12,12,0,0,0,0-24H116a28,28,0,0,1,0-56h4V72a8,8,0,0,1,16,0v8h16a8,8,0,0,1,0,16H116a12,12,0,0,0,0,24h24A28,28,0,0,1,168,148Z"}))],["fill",t.createElement(t.Fragment,null,t.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm12,152h-4v8a8,8,0,0,1-16,0v-8H104a8,8,0,0,1,0-16h36a12,12,0,0,0,0-24H116a28,28,0,0,1,0-56h4V72a8,8,0,0,1,16,0v8h16a8,8,0,0,1,0,16H116a12,12,0,0,0,0,24h24a28,28,0,0,1,0,56Z"}))],["light",t.createElement(t.Fragment,null,t.createElement("path",{d:"M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm0,192a90,90,0,1,1,90-90A90.1,90.1,0,0,1,128,218Zm38-70a26,26,0,0,1-26,26h-6v10a6,6,0,0,1-12,0V174H104a6,6,0,0,1,0-12h36a14,14,0,0,0,0-28H116a26,26,0,0,1,0-52h6V72a6,6,0,0,1,12,0V82h18a6,6,0,0,1,0,12H116a14,14,0,0,0,0,28h24A26,26,0,0,1,166,148Z"}))],["regular",t.createElement(t.Fragment,null,t.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm40-68a28,28,0,0,1-28,28h-4v8a8,8,0,0,1-16,0v-8H104a8,8,0,0,1,0-16h36a12,12,0,0,0,0-24H116a28,28,0,0,1,0-56h4V72a8,8,0,0,1,16,0v8h16a8,8,0,0,1,0,16H116a12,12,0,0,0,0,24h24A28,28,0,0,1,168,148Z"}))],["thin",t.createElement(t.Fragment,null,t.createElement("path",{d:"M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm0,192a92,92,0,1,1,92-92A92.1,92.1,0,0,1,128,220Zm36-72a24,24,0,0,1-24,24h-8v12a4,4,0,0,1-8,0V172H104a4,4,0,0,1,0-8h36a16,16,0,0,0,0-32H116a24,24,0,0,1,0-48h8V72a4,4,0,0,1,8,0V84h20a4,4,0,0,1,0,8H116a16,16,0,0,0,0,32h24A24,24,0,0,1,164,148Z"}))]]),Pe=new Map([["bold",t.createElement(t.Fragment,null,t.createElement("path",{d:"M209.88,69.83A115.19,115.19,0,0,0,128,36h-.41C63.85,36.22,12,88.76,12,153.13V176a20,20,0,0,0,20,20H224a20,20,0,0,0,20-20V152A115.25,115.25,0,0,0,209.88,69.83ZM220,172H127.32l46.44-65A12,12,0,1,0,154.24,93L97.82,172H36V153.13c0-1.72,0-3.43.14-5.13H56a12,12,0,0,0,0-24H40.62c10.91-33.39,40-58.52,75.38-63.21V80a12,12,0,0,0,24,0V60.8A92,92,0,0,1,215.66,124H200a12,12,0,0,0,0,24h19.9c.06,1.33.1,2.66.1,4Z"}))],["duotone",t.createElement(t.Fragment,null,t.createElement("path",{d:"M232,152v24a8,8,0,0,1-8,8H32a8,8,0,0,1-8-8V153.13C24,95.65,70.15,48.2,127.63,48A104,104,0,0,1,232,152Z",opacity:"0.2"}),t.createElement("path",{d:"M207.06,72.67A111.24,111.24,0,0,0,128,40h-.4C66.07,40.21,16,91,16,153.13V176a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V152A111.25,111.25,0,0,0,207.06,72.67ZM224,176H119.71l54.76-75.3a8,8,0,0,0-12.94-9.42L99.92,176H32V153.13c0-3.08.15-6.12.43-9.13H56a8,8,0,0,0,0-16H35.27c10.32-38.86,44-68.24,84.73-71.66V80a8,8,0,0,0,16,0V56.33A96.14,96.14,0,0,1,221,128H200a8,8,0,0,0,0,16h23.67c.21,2.65.33,5.31.33,8Z"}))],["fill",t.createElement(t.Fragment,null,t.createElement("path",{d:"M240,152v24a16,16,0,0,1-16,16H115.93a4,4,0,0,1-3.24-6.35L174.27,101a8.21,8.21,0,0,0-1.37-11.3,8,8,0,0,0-11.37,1.61l-72,99.06A4,4,0,0,1,86.25,192H32a16,16,0,0,1-16-16V153.13c0-1.79,0-3.57.13-5.33a4,4,0,0,1,4-3.8H48a8,8,0,0,0,8-8.53A8.17,8.17,0,0,0,47.73,128H23.92a4,4,0,0,1-3.87-5c12-43.84,49.66-77.13,95.52-82.28a4,4,0,0,1,4.43,4V72a8,8,0,0,0,8.53,8A8.17,8.17,0,0,0,136,71.73V44.67a4,4,0,0,1,4.43-4A112.18,112.18,0,0,1,236.23,123a4,4,0,0,1-3.88,5H208.27a8.17,8.17,0,0,0-8.25,7.47,8,8,0,0,0,8,8.53h27.92a4,4,0,0,1,4,3.86C240,149.23,240,150.61,240,152Z"}))],["light",t.createElement(t.Fragment,null,t.createElement("path",{d:"M205.65,74.08A109.26,109.26,0,0,0,128,42h-.39C67.17,42.21,18,92.06,18,153.13V176a14,14,0,0,0,14,14H224a14,14,0,0,0,14-14V152A109.3,109.3,0,0,0,205.65,74.08ZM226,176a2,2,0,0,1-2,2H115.78l57.07-78.47a6,6,0,0,0-9.7-7.06L100.94,178H32a2,2,0,0,1-2-2V153.13A102.36,102.36,0,0,1,30.62,142H56a6,6,0,0,0,0-12H32.71C42.6,88.4,78.53,56.86,122,54.19V80a6,6,0,0,0,12,0V54.19A98.05,98.05,0,0,1,223.53,130H200a6,6,0,0,0,0,12h25.5c.33,3.3.5,6.64.5,10Z"}))],["regular",t.createElement(t.Fragment,null,t.createElement("path",{d:"M207.06,72.67A111.24,111.24,0,0,0,128,40h-.4C66.07,40.21,16,91,16,153.13V176a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V152A111.25,111.25,0,0,0,207.06,72.67ZM224,176H119.71l54.76-75.3a8,8,0,0,0-12.94-9.42L99.92,176H32V153.13c0-3.08.15-6.12.43-9.13H56a8,8,0,0,0,0-16H35.27c10.32-38.86,44-68.24,84.73-71.66V80a8,8,0,0,0,16,0V56.33A96.14,96.14,0,0,1,221,128H200a8,8,0,0,0,0,16h23.67c.21,2.65.33,5.31.33,8Z"}))],["thin",t.createElement(t.Fragment,null,t.createElement("path",{d:"M204.23,75.5A107.37,107.37,0,0,0,127.62,44C68.28,44.21,20,93.16,20,153.13V176a12,12,0,0,0,12,12H224a12,12,0,0,0,12-12V152A107.25,107.25,0,0,0,204.23,75.5ZM228,176a4,4,0,0,1-4,4H111.85l59.38-81.65a4,4,0,1,0-6.46-4.7L102,180H32a4,4,0,0,1-4-4V153.13A103.42,103.42,0,0,1,28.84,140H56a4,4,0,0,0,0-8H30.21C39.59,87.66,77.84,53.93,124,52.09V80a4,4,0,0,0,8,0V52.08A100.08,100.08,0,0,1,226,132H200a4,4,0,0,0,0,8h27.29a101.6,101.6,0,0,1,.71,12Z"}))]]),Fe=new Map([["bold",t.createElement(t.Fragment,null,t.createElement("path",{d:"M196,136a16,16,0,1,1-16-16A16,16,0,0,1,196,136Zm40-36v80a32,32,0,0,1-32,32H60a32,32,0,0,1-32-32V60.92A32,32,0,0,1,60,28H192a12,12,0,0,1,0,24H60a8,8,0,0,0-8,8.26v.08A8.32,8.32,0,0,0,60.48,68H204A32,32,0,0,1,236,100Zm-24,0a8,8,0,0,0-8-8H60.48A33.72,33.72,0,0,1,52,90.92V180a8,8,0,0,0,8,8H204a8,8,0,0,0,8-8Z"}))],["duotone",t.createElement(t.Fragment,null,t.createElement("path",{d:"M224,80V192a8,8,0,0,1-8,8H56a16,16,0,0,1-16-16V56A16,16,0,0,0,56,72H216A8,8,0,0,1,224,80Z",opacity:"0.2"}),t.createElement("path",{d:"M216,64H56a8,8,0,0,1,0-16H192a8,8,0,0,0,0-16H56A24,24,0,0,0,32,56V184a24,24,0,0,0,24,24H216a16,16,0,0,0,16-16V80A16,16,0,0,0,216,64Zm0,128H56a8,8,0,0,1-8-8V78.63A23.84,23.84,0,0,0,56,80H216Zm-48-60a12,12,0,1,1,12,12A12,12,0,0,1,168,132Z"}))],["fill",t.createElement(t.Fragment,null,t.createElement("path",{d:"M216,64H56a8,8,0,0,1,0-16H192a8,8,0,0,0,0-16H56A24,24,0,0,0,32,56V184a24,24,0,0,0,24,24H216a16,16,0,0,0,16-16V80A16,16,0,0,0,216,64Zm-36,80a12,12,0,1,1,12-12A12,12,0,0,1,180,144Z"}))],["light",t.createElement(t.Fragment,null,t.createElement("path",{d:"M216,66H56a10,10,0,0,1,0-20H192a6,6,0,0,0,0-12H56A22,22,0,0,0,34,56V184a22,22,0,0,0,22,22H216a14,14,0,0,0,14-14V80A14,14,0,0,0,216,66Zm2,126a2,2,0,0,1-2,2H56a10,10,0,0,1-10-10V75.59A21.84,21.84,0,0,0,56,78H216a2,2,0,0,1,2,2Zm-28-60a10,10,0,1,1-10-10A10,10,0,0,1,190,132Z"}))],["regular",t.createElement(t.Fragment,null,t.createElement("path",{d:"M216,64H56a8,8,0,0,1,0-16H192a8,8,0,0,0,0-16H56A24,24,0,0,0,32,56V184a24,24,0,0,0,24,24H216a16,16,0,0,0,16-16V80A16,16,0,0,0,216,64Zm0,128H56a8,8,0,0,1-8-8V78.63A23.84,23.84,0,0,0,56,80H216Zm-48-60a12,12,0,1,1,12,12A12,12,0,0,1,168,132Z"}))],["thin",t.createElement(t.Fragment,null,t.createElement("path",{d:"M216,68H56a12,12,0,0,1,0-24H192a4,4,0,0,0,0-8H56A20,20,0,0,0,36,56V184a20,20,0,0,0,20,20H216a12,12,0,0,0,12-12V80A12,12,0,0,0,216,68Zm4,124a4,4,0,0,1-4,4H56a12,12,0,0,1-12-12V72a19.86,19.86,0,0,0,12,4H216a4,4,0,0,1,4,4Zm-32-60a8,8,0,1,1-8-8A8,8,0,0,1,188,132Z"}))]]),Q=t.forwardRef((a,s)=>t.createElement(R,{ref:s,...a,weights:Ce}));Q.displayName="CircleDashedIcon";const Te=Q,X=t.forwardRef((a,s)=>t.createElement(R,{ref:s,...a,weights:Ve}));X.displayName="CurrencyCircleDollarIcon";const $e=X,ee=t.forwardRef((a,s)=>t.createElement(R,{ref:s,...a,weights:Pe}));ee.displayName="GaugeIcon";const Ie=ee,te=t.forwardRef((a,s)=>t.createElement(R,{ref:s,...a,weights:Fe}));te.displayName="WalletIcon";const Re=te,O=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}),I=["#0f766e","#1d4ed8","#ea580c","#9333ea","#475569"],Be=({breakdown:a})=>{const n=2*Math.PI*64,r=Math.max(1,a.reduce((u,i)=>u+i.pct,0));let h=0;return e.jsxs("svg",{width:144,height:144,viewBox:"0 0 144 144",className:"-rotate-90",children:[e.jsx("circle",{cx:144/2,cy:144/2,r:64,fill:"none",stroke:"#e2e8f0",strokeWidth:16}),a.map((u,i)=>{const E=u.pct/r*n,j=n-h;return h+=E,e.jsx("circle",{cx:144/2,cy:144/2,r:64,fill:"none",stroke:I[i%I.length],strokeWidth:16,strokeDasharray:`${E} ${n}`,strokeDashoffset:j,strokeLinecap:"butt"},`${u.label}-${i}`)})]})},De=({planData:a,highlightSection:s})=>{if(!a)return e.jsx("aside",{className:"h-full min-h-0 bg-white","aria-label":"Canvas preview panel"});const l=a.timeline.length>0,c=a.budget.breakdown.length>0;return e.jsxs("aside",{className:"h-full min-h-0 overflow-y-auto overscroll-y-contain bg-white","aria-label":"Canvas preview panel",children:[e.jsx("header",{id:"canvas-overview",className:`sticky top-0 z-10 border-b border-slate-200 bg-white/95 px-5 py-4 backdrop-blur ${s==="overview"?"bg-brand-teal/5":""}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.24em] text-slate-500",children:"Canvas Preview"}),e.jsx("h2",{className:"mt-1 truncate text-lg font-semibold text-slate-900",children:a.title}),e.jsx("p",{className:"mt-1 line-clamp-2 text-xs text-slate-600",children:a.summary})]}),e.jsxs("div",{className:"inline-flex items-center gap-1 rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-[11px] text-slate-600",children:[e.jsx(Ze,{className:"h-3 w-3"}),"Generated by AI - use chat to modify"]})]})}),e.jsxs("div",{className:"space-y-5 p-5",children:[e.jsxs("section",{id:"canvas-kpis",className:`grid grid-cols-3 gap-2 rounded-2xl p-1 ${s==="kpis"?"bg-brand-teal/5":""}`,children:[e.jsxs("article",{className:"rounded-xl border border-slate-200 bg-slate-50/80 p-3",children:[e.jsxs("div",{className:"flex items-center gap-1 text-[11px] uppercase tracking-[0.12em] text-slate-500",children:[e.jsx(Re,{className:"h-3.5 w-3.5"}),"Total Cost"]}),e.jsx("p",{className:"mt-2 text-sm font-semibold text-slate-900",children:O.format(a.kpis.totalCost)})]}),e.jsxs("article",{className:"rounded-xl border border-slate-200 bg-slate-50/80 p-3",children:[e.jsxs("div",{className:"flex items-center gap-1 text-[11px] uppercase tracking-[0.12em] text-slate-500",children:[e.jsx($e,{className:"h-3.5 w-3.5"}),"Cost / Attendee"]}),e.jsx("p",{className:"mt-2 text-sm font-semibold text-slate-900",children:O.format(a.kpis.costPerAttendee)})]}),e.jsxs("article",{className:"rounded-xl border border-slate-200 bg-slate-50/80 p-3",children:[e.jsxs("div",{className:"flex items-center gap-1 text-[11px] uppercase tracking-[0.12em] text-slate-500",children:[e.jsx(Ie,{className:"h-3.5 w-3.5"}),"Confidence"]}),e.jsxs("p",{className:"mt-2 text-sm font-semibold text-slate-900",children:[a.kpis.confidencePct,"%"]})]})]}),e.jsxs("section",{id:"canvas-inventory",className:`space-y-3 rounded-2xl border border-slate-200 p-4 ${s==="inventory"?"bg-brand-teal/5":"bg-slate-50/60"}`,children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Space & Inventory"}),e.jsxs("div",{id:"canvas-venue",className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-3",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-[0.12em] text-slate-500",children:"Before"}),e.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:a.spacePlan.beforeLabel})]}),e.jsxs("div",{className:"rounded-xl border border-brand-teal/20 bg-white p-3",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-[0.12em] text-brand-teal",children:"After"}),e.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:a.spacePlan.afterLabel})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:Object.entries(a.spacePlan.inventory).map(([n,r])=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-200 bg-white px-3 py-2",children:[e.jsx("span",{className:"capitalize text-slate-500",children:n}),e.jsx("span",{className:"font-semibold text-slate-900",children:r})]},n))})]}),e.jsxs("section",{id:"canvas-timeline",className:`space-y-3 rounded-2xl border border-slate-200 p-4 ${s==="timeline"?"bg-brand-teal/5":"bg-white"}`,children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Timeline & Dependencies"}),l?e.jsx("div",{className:"space-y-3 border-l border-slate-200 pl-3",children:a.timeline.map((n,r)=>e.jsxs("article",{className:"relative",children:[e.jsx("span",{className:"absolute -left-[1.01rem] top-1 h-2.5 w-2.5 rounded-full bg-brand-teal"}),e.jsxs("p",{className:"text-xs font-semibold text-slate-900",children:[n.time," - ",n.title]}),e.jsx("p",{className:"mt-1 text-xs text-slate-600",children:n.notes})]},`${n.time}-${r}`))}):null]}),e.jsxs("section",{id:"canvas-budget",className:`space-y-3 rounded-2xl border border-slate-200 p-4 ${s==="budget"?"bg-brand-teal/5":"bg-white"}`,children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Budget Simulation"}),c?e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Be,{breakdown:a.budget.breakdown}),e.jsxs("div",{className:"flex-1 space-y-2",children:[a.budget.breakdown.map((n,r)=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[e.jsx("span",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:I[r%I.length]}}),n.label]}),e.jsxs("span",{className:"font-semibold text-slate-900",children:[n.pct,"%"]})]},n.label)),e.jsxs("p",{className:"pt-2 text-xs text-slate-600",children:["Total: ",O.format(a.budget.total)]}),a.budget.tradeoffNote&&e.jsx("p",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600",children:a.budget.tradeoffNote})]})]}):null]})]})]})},ze=({copilot:a,canvas:s,showCanvas:l=!0,topBar:c})=>{const[n,r]=d.useState(!1),h=l?"lg:grid-cols-[clamp(22rem,25vw,26rem)_minmax(0,1fr)]":"lg:grid-cols-1";return e.jsxs("div",{className:"flex min-h-[calc(100vh-8rem)] flex-col gap-4",children:[c,e.jsxs("div",{className:"min-h-0 flex-1",children:[e.jsxs("div",{className:`hidden h-full min-h-0 rounded-2xl border border-slate-200 bg-white shadow-sm lg:grid ${h}`,children:[e.jsx("div",{className:`min-h-0 overflow-hidden ${l?"border-r border-slate-200":""}`,children:a}),l&&e.jsx("div",{className:"min-h-0 overflow-hidden",children:s})]}),e.jsxs("div",{className:"hidden h-full min-h-0 flex-col gap-4 md:flex lg:hidden",children:[e.jsx("div",{className:`min-h-0 overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm ${l?"basis-[56%]":"flex-1"}`,children:a}),l&&e.jsx("div",{className:"min-h-0 basis-[44%] overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm",children:s})]}),e.jsxs("div",{className:"flex h-full min-h-0 flex-col rounded-2xl border border-slate-200 bg-white shadow-sm md:hidden",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 px-4 py-3",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-500",children:"Co-pilot"}),l&&e.jsx(w,{size:"sm",variant:"outline",className:"h-8 rounded-lg",onClick:()=>r(!0),children:"Preview"})]}),e.jsx("div",{className:"min-h-0 flex-1 overflow-hidden",children:a})]})]}),l&&e.jsx(he,{open:n,onOpenChange:r,children:e.jsxs(ue,{side:"right",className:"w-full p-0 sm:max-w-lg",children:[e.jsx(xe,{className:"border-b border-slate-200 px-5 py-4",children:e.jsx(pe,{children:"Canvas Preview"})}),e.jsx("div",{className:"h-[calc(100vh-4.5rem)] overflow-hidden",children:s})]})})]})},Le=({onSubmitPrompt:a,templates:s,onSelectTemplate:l,onExploreMore:c})=>{const[n,r]=d.useState(""),h=d.useCallback(()=>{const i=n.trim();i&&(a(i),r(""))},[n,a]),u=i=>{i.key==="Enter"&&!i.shiftKey&&(i.preventDefault(),h())};return e.jsx("div",{className:"flex min-h-[calc(100vh-8rem)] w-full items-center justify-center px-4 py-6 transition-opacity duration-200 ease-out",children:e.jsxs("div",{className:"w-full max-w-5xl",children:[e.jsx("div",{className:"mx-auto w-full max-w-2xl rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx(J,{value:n,onChange:i=>r(i.target.value),onKeyDown:u,rows:1,"aria-label":"Start planning prompt",placeholder:"Describe your event goals, guest count, date, and budget...",className:"min-h-[48px] max-h-[120px] resize-none border-slate-200 text-sm focus-visible:ring-brand-teal/35"}),e.jsx(w,{onClick:h,disabled:!n.trim(),className:"h-10 min-w-[112px] rounded-xl bg-brand-teal px-4 text-white hover:bg-brand-teal/90 disabled:bg-slate-200 disabled:text-slate-400",children:"Generate"})]})}),e.jsx("div",{className:"mx-auto mt-5 grid w-full max-w-5xl gap-4 md:grid-cols-3",children:s.map(i=>e.jsxs("button",{type:"button",onClick:()=>l(i.id),className:"group overflow-hidden rounded-2xl border border-slate-200 bg-white text-left shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:border-slate-300 hover:bg-slate-50",children:[e.jsx("div",{className:"h-32 w-full overflow-hidden bg-slate-100",children:i.imageUrl?e.jsx("img",{src:i.imageUrl,alt:i.title,className:"h-full w-full object-cover transition-transform duration-200 group-hover:scale-[1.02]"}):e.jsx("div",{className:"h-full w-full bg-gradient-to-br from-slate-100 to-slate-200"})}),e.jsxs("div",{className:"space-y-1 px-3 py-3",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900",children:i.title}),e.jsx("p",{className:"text-xs text-slate-600",children:i.description})]})]},i.id))}),c&&e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx(w,{variant:"outline",className:"rounded-lg border-slate-200 text-slate-700",onClick:c,children:"Explore more"})})]})})},K=[{id:"product-launch",title:"Product Launch Blueprint",description:"Premium launch sequencing with keynote, demos, and networking arcs.",imageUrl:"https://images.unsplash.com/photo-1505373877841-8d25f7d46678?auto=format&fit=crop&q=80&w=600"},{id:"executive-summit",title:"Executive Summit Blueprint",description:"Two-day summit structure with focused sessions and VIP hospitality.",imageUrl:"https://images.unsplash.com/photo-1511795409834-ef04bbd61622?auto=format&fit=crop&q=80&w=600"},{id:"brand-evening",title:"Brand Evening Blueprint",description:"Curated evening flow from guest arrival to storytelling close.",imageUrl:"https://images.unsplash.com/photo-1464366400600-7168b8af9bc3?auto=format&fit=crop&q=80&w=600"}],ae="strathwell_credits_v1",se=1,Oe=120,_e=1,q=(a,s)=>{const l=Number(a);return Number.isFinite(l)?Math.max(1,Math.round(l)):s},Ue=(a,s)=>s,re=()=>{const a=Ue(void 0,!0),s=q(void 0,Oe),l=q(void 0,_e);return{isEnabled:a,defaultCredits:s,creditsPerMessage:l}},Ge=a=>{try{const s=window.localStorage.getItem(ae);if(!s)return a;const l=JSON.parse(s);return l.version!==se||typeof l.credits!="number"||!Number.isFinite(l.credits)?a:Math.max(0,Math.round(l.credits))}catch(s){return console.warn("Failed to load credits state:",s),a}},Ke=a=>{try{const s={version:se,credits:Math.max(0,Math.round(a)),updatedAt:Date.now()};window.localStorage.setItem(ae,JSON.stringify(s))}catch(s){console.warn("Failed to save credits state:",s)}},qe=()=>{const a=d.useMemo(()=>re(),[]),[s,l]=d.useState(()=>Ge(a.defaultCredits)),c=d.useRef(s);d.useEffect(()=>{c.current=s},[s]),d.useEffect(()=>{a.isEnabled&&Ke(s)},[a.isEnabled,s]);const n=d.useCallback(u=>{if(!a.isEnabled)return!0;const i=Math.max(1,Math.round(u));if(c.current<i)return!1;const o=c.current-i;return c.current=o,l(o),!0},[a.isEnabled]),r=d.useCallback(u=>{const i=Math.max(1,Math.round(u)),o=c.current+i;c.current=o,l(o)},[]),h=d.useCallback(()=>{c.current=a.defaultCredits,l(a.defaultCredits)},[a.defaultCredits]);return{credits:s,deduct:n,add:r,resetToDefault:h,isEnabled:a.isEnabled}},We=["Plan a 120-guest product launch in SF for March, budget $25k.","Build a premium timeline for a two-day executive summit in Austin.","Find a venue + catering direction for a 90-person networking night.","Create a staffing and vendor checklist for a spring brand activation."],Ye=a=>a.id==="executive-summit"?{blueprintId:`template-${a.id}`,title:"Executive Summit Blueprint",summary:"Structured two-day summit with keynote depth, breakouts, and concierge hospitality.",kpis:{totalCost:42e3,costPerAttendee:280,confidencePct:82},spacePlan:{beforeLabel:"Open ballroom",afterLabel:"Summit zones with breakout wings",inventory:{chairs:180,tables:30,stage:2,buffet:5}},timeline:[{time:"T-6 weeks",title:"Confirm speaker blocks",notes:"Finalize keynote and panel sequencing."},{time:"T-2 weeks",title:"Production rehearsal",notes:"Dry-run AV, stage transitions, and room resets."},{time:"Event day",title:"Operate summit flow",notes:"Coordinate welcome, sessions, and closing dinner cadence."}],budget:{total:42e3,breakdown:[{label:"Venue",pct:36},{label:"Food + Beverage",pct:24},{label:"Production",pct:20},{label:"Staffing",pct:14},{label:"Contingency",pct:6}],tradeoffNote:"Protect keynote production quality before optimizing decor layers."},status:"ready_for_review"}:a.id==="brand-evening"?{blueprintId:`template-${a.id}`,title:"Brand Evening Blueprint",summary:"Atmospheric evening program designed for storytelling and high-touch networking.",kpis:{totalCost:34e3,costPerAttendee:227,confidencePct:80},spacePlan:{beforeLabel:"Raw venue floor",afterLabel:"Arrival lounge + stage + experience pods",inventory:{chairs:140,tables:24,stage:1,buffet:4}},timeline:[{time:"T-5 weeks",title:"Lock guest journey script",notes:"Confirm arrival, reveal, and networking beats."},{time:"T-10 days",title:"Finalize visual production",notes:"Approve run-of-show visuals, lighting, and audio cues."},{time:"Event day",title:"Host branded experience",notes:"Run transitions between showcase moments and close."}],budget:{total:34e3,breakdown:[{label:"Venue",pct:34},{label:"Food + Beverage",pct:26},{label:"Production",pct:18},{label:"Staffing",pct:15},{label:"Contingency",pct:7}],tradeoffNote:"If needed, trim decorative accents before reducing guest hospitality."},status:"ready_for_review"}:{blueprintId:`template-${a.id}`,title:"Product Launch Blueprint",summary:"Launch-first orchestration with timed reveals, demo moments, and conversion checkpoints.",kpis:{totalCost:3e4,costPerAttendee:214,confidencePct:84},spacePlan:{beforeLabel:"Open event floor",afterLabel:"Launch stage + demo zones + networking area",inventory:{chairs:160,tables:26,stage:1,buffet:4}},timeline:[{time:"T-4 weeks",title:"Finalize launch narrative",notes:"Align messaging, keynote, and feature reveal sequence."},{time:"T-1 week",title:"Full run-through",notes:"Test stage cues, demos, and guest check-in flows."},{time:"Event day",title:"Execute launch experience",notes:"Run arrival to close with live conversion checkpoints."}],budget:{total:3e4,breakdown:[{label:"Venue",pct:37},{label:"Food + Beverage",pct:23},{label:"Production",pct:22},{label:"Staffing",pct:12},{label:"Contingency",pct:6}],tradeoffNote:"Preserve launch demo quality before reducing hospitality depth."},status:"ready_for_review"};let W=0;const $=a=>(W+=1,`${a}-${Date.now()}-${W}`),Y=(a,s=!1)=>{const l=a.split(/(https?:\/\/[^\s]+)/gi),c=s?"font-medium underline underline-offset-2 break-all text-white/95 hover:text-white":"font-medium underline underline-offset-2 break-all text-brand-teal hover:text-brand-teal/80";return l.map((n,r)=>/^https?:\/\//i.test(n)?e.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:c,children:n},`msg-link-${r}-${n}`):e.jsx(d.Fragment,{children:n},`msg-text-${r}`))},ne=d.memo(({messages:a,onQuickPrompt:s})=>{const l=d.useMemo(()=>[...a].sort((r,h)=>r.createdAt-h.createdAt),[a]),c=r=>{const h=r.status==="thinking"||r.status==="orchestrating";return e.jsxs("div",{className:"animate-in fade-in-0 slide-in-from-bottom-1 flex items-start gap-3 duration-200 ease-out",children:[e.jsx("div",{className:"mt-1 flex h-8 w-8 shrink-0 items-center justify-center rounded-full border border-slate-200 bg-white",children:e.jsx(U,{className:"h-4 w-4 text-brand-teal"})}),e.jsx("div",{className:`max-w-[85%] rounded-2xl border px-4 py-3 text-sm text-slate-700 ${h?"border-slate-300 bg-slate-100 italic text-slate-600":"border-slate-200 bg-slate-100"}`,children:e.jsx("p",{className:`whitespace-pre-wrap break-words [overflow-wrap:anywhere] ${h?"animate-pulse":""}`,children:Y(r.text)})})]},r.id)},n=r=>e.jsx("div",{className:"animate-in fade-in-0 slide-in-from-bottom-1 flex justify-end duration-200 ease-out",children:e.jsxs("div",{className:"flex max-w-[85%] flex-col items-end gap-1.5",children:[e.jsx("span",{className:"rounded-full border border-brand-teal/20 bg-brand-teal/10 px-2 py-0.5 text-[11px] font-semibold text-brand-teal",children:"You"}),e.jsx("div",{className:"rounded-2xl bg-brand-teal px-4 py-3 text-sm text-white",children:e.jsx("p",{className:"whitespace-pre-wrap break-words [overflow-wrap:anywhere]",children:Y(r.text,!0)})})]})},r.id);return a.length===0?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1 flex h-8 w-8 shrink-0 items-center justify-center rounded-full border border-slate-200 bg-white",children:e.jsx(U,{className:"h-4 w-4 text-brand-teal"})}),e.jsx("div",{className:"max-w-[85%] rounded-2xl border border-slate-200 bg-slate-100 px-4 py-3 text-sm text-slate-700",children:"Hi! I'm your AI event planner. Share your goals and constraints, and I'll help orchestrate the plan."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium uppercase tracking-[0.16em] text-slate-500",children:"Try one of these prompts"}),e.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:We.map(r=>e.jsx(w,{variant:"outline",className:"h-auto justify-start whitespace-normal rounded-xl border-slate-200 px-3 py-2 text-left text-xs text-slate-600 transition-colors duration-200 hover:bg-slate-50 focus-visible:ring-brand-teal/35",onClick:()=>s(r),children:r},r))})]})]}):e.jsx("div",{className:"space-y-5",children:l.map(r=>r.role==="user"?n(r):c(r))})});ne.displayName="MessageThread";const Je=({messages:a,draftMessage:s,onDraftChange:l,onSend:c,onQuickPrompt:n,disableSend:r,isCreditsEnabled:h,credits:u,creditsPerMessage:i,onAddDemoCredits:o,onResetCredits:E,heightClass:j="h-full min-h-0"})=>{const x=d.useRef(null),N=d.useRef(null),[V,M]=d.useState(!1),S=h&&u<i,B=r||S;d.useEffect(()=>{x.current&&(x.current.scrollTop=x.current.scrollHeight)},[a]),d.useEffect(()=>{N.current&&(N.current.style.height="auto",N.current.style.height=`${Math.min(N.current.scrollHeight,112)}px`)},[s]);const D=b=>{b.key==="Enter"&&!b.shiftKey&&(b.preventDefault(),c())};return e.jsxs("section",{className:`flex min-h-0 flex-col overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm ${j}`,children:[e.jsx("header",{className:"sticky top-0 z-10 border-b border-slate-200 bg-white/95 px-5 py-4 backdrop-blur",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.28em] text-brand-teal",children:"Strathwell AI"}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm text-slate-600",children:[e.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500"}),e.jsx("span",{children:"Ready to plan"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[h&&e.jsxs(_,{variant:"secondary",className:"border border-brand-teal/20 bg-brand-teal/10 text-brand-teal",children:[e.jsx(ve,{className:"mr-1 h-3 w-3"}),"Credits: ",u]}),e.jsxs(_,{variant:"secondary",className:"border border-emerald-200 bg-emerald-50 text-emerald-700",children:[e.jsx(Te,{className:"mr-1 h-3 w-3"}),"Ready"]})]})]})}),e.jsx("div",{ref:x,className:"flex-1 overflow-y-auto overscroll-y-contain p-5",children:e.jsx(ne,{messages:a,onQuickPrompt:n})}),e.jsx("footer",{className:"sticky bottom-0 z-10 border-t border-slate-200 bg-white/95 px-5 py-4 backdrop-blur",children:e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",children:[S&&e.jsxs("div",{className:"mb-3 flex items-center justify-between gap-2 rounded-xl border border-amber-200 bg-amber-50 px-3 py-2",children:[e.jsx("p",{className:"text-xs text-amber-900",children:"You're out of credits. Upgrade to continue."}),e.jsxs(we,{open:V,onOpenChange:M,children:[e.jsx(je,{asChild:!0,children:e.jsx(w,{size:"sm",className:"h-7 rounded-lg bg-brand-teal px-3 text-xs text-white hover:bg-brand-teal/90",children:"Upgrade"})}),e.jsxs(Ne,{children:[e.jsxs(Ae,{children:[e.jsx(ye,{children:"Upgrade is coming soon"}),e.jsx(ke,{children:"Billing and package management will arrive with backend integration."})]}),e.jsxs(Ee,{children:[e.jsx(w,{onClick:()=>{o(),M(!1)},className:"bg-brand-teal text-white hover:bg-brand-teal/90",children:"Add demo credits (+50)"}),e.jsx(w,{variant:"outline",onClick:()=>{E(),M(!1)},children:"Reset to default"})]})]})]})]}),e.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[e.jsxs(w,{variant:"outline",size:"sm",className:"h-8 rounded-lg border-slate-200 px-2 focus-visible:ring-brand-teal/35",children:["Styles",e.jsx(He,{className:"ml-1 h-3.5 w-3.5"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(w,{variant:"ghost",size:"icon",className:"h-8 w-8 text-slate-500 focus-visible:ring-brand-teal/35","aria-label":"Attach file",children:e.jsx(Me,{className:"h-4 w-4"})}),e.jsx(w,{variant:"ghost",size:"icon",className:"h-8 w-8 text-slate-500 focus-visible:ring-brand-teal/35","aria-label":"Voice input",children:e.jsx(Se,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx(J,{ref:N,value:s,onChange:b=>l(b.target.value),onKeyDown:D,rows:1,"aria-label":"Message composer",placeholder:"Describe your event goals, guest count, date, and budget...",className:"min-h-[44px] max-h-[112px] resize-none border-slate-200 text-sm focus-visible:ring-brand-teal/35"}),e.jsx(w,{onClick:c,disabled:B,className:"h-10 min-w-[112px] rounded-xl bg-brand-teal px-4 text-white transition-colors duration-200 hover:bg-brand-teal/90 disabled:cursor-not-allowed disabled:bg-slate-200 disabled:text-slate-400 disabled:opacity-100",children:"Generate"})]}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-between gap-2",children:[e.jsx("p",{className:"text-[11px] text-slate-500",children:"Shift+Enter for a new line."}),h&&e.jsxs("p",{className:"text-[11px] text-slate-500",children:[i," ",i===1?"credit":"credits"," per message"]})]})]})})]})},tt=()=>{const[a,s]=d.useState(""),l=d.useMemo(()=>re(),[]),{credits:c,deduct:n,add:r,resetToDefault:h,isEnabled:u}=qe(),{isReady:i,activeSession:o,setActiveSession:E,createNewSession:j,updateSession:x}=be(),N=d.useRef([]),V=d.useRef(!1),M=(o==null?void 0:o.messages)??[],S=!!(o!=null&&o.plannerState),B=!o||M.length===0&&!S;d.useEffect(()=>()=>{N.current.forEach(g=>window.clearTimeout(g)),N.current=[]},[]),d.useEffect(()=>{if(!i||V.current)return;const g=!!window.localStorage.getItem(ge),f=!!(o&&(o.messages.length>0||o.plannerState));!g&&f&&j(),V.current=!0},[o,j,i]);const D=d.useCallback(()=>e.jsx(De,{planData:(o==null?void 0:o.plannerState)??null}),[o==null?void 0:o.plannerState]),b=d.useCallback(async g=>{const f=g.trim();if(!f||u&&!n(l.creditsPerMessage))return;s("");const Z=o??j(),y=Z.id,C=Date.now(),P={id:$("user"),role:"user",text:f,status:"final",createdAt:C},A=$("assistant-thinking"),ce={id:A,role:"assistant",text:"Strath AI is thinking ...",status:"thinking",createdAt:C+1},z=Z.messages.filter(m=>m.role==="user").length===0?G.retitleSessionFromFirstMessage(Z,f):Z;x(y,m=>({...m,title:z.title,messages:[...m.messages,P,ce]}));const me=window.setTimeout(()=>{x(y,m=>({...m,messages:m.messages.map(p=>p.id===A?{...p,text:"Strath AI is orchestrating ...",status:"orchestrating"}:p)}))},300);N.current.push(me);try{const m=await G.sendMessage({...z,messages:[...z.messages,P]},f);if(x(y,p=>{const v=p.messages.map(H=>H.id===A?m.assistantMessage:H),L=v.some(H=>H.id===m.assistantMessage.id),k=m.updatedSession??{},F=m.updatedPlannerState??k.plannerState??p.plannerState,T=m.updatedPlannerState!==void 0||k.plannerState!==void 0;return{...p,...k,messages:L?v:[...v,m.assistantMessage],plannerState:F,plannerStateUpdatedAt:T?k.plannerStateUpdatedAt??Date.now():k.plannerStateUpdatedAt??p.plannerStateUpdatedAt}}),m.deferredGeneration){const p=window.setTimeout(()=>{x(y,v=>{var F,T,H;const L={id:$("assistant-generated"),role:"assistant",text:((F=m.deferredGeneration)==null?void 0:F.assistantText)??"Blueprint generated.",status:"final",createdAt:Date.now()},k=((T=m.deferredGeneration)==null?void 0:T.sessionUpdate)??{};return{...v,...k,plannerState:((H=m.deferredGeneration)==null?void 0:H.plannerState)??v.plannerState,plannerStateUpdatedAt:k.plannerStateUpdatedAt??Date.now(),messages:[...v.messages,L]}})},m.deferredGeneration.delayMs);N.current.push(p)}}catch(m){console.error("plannerService.sendMessage failed:",m),x(y,p=>({...p,messages:p.messages.map(v=>v.id===A?{...v,text:"I hit a temporary issue. Please try again in a moment.",status:"final"}:v)}))}},[o,j,l.creditsPerMessage,n,u,x]),le=d.useCallback(()=>{b(a)},[a,b]),ie=d.useCallback(g=>{b(g)},[b]),de=d.useCallback(g=>{b(g)},[b]),oe=d.useCallback(g=>{const f=K.find(A=>A.id===g);if(!f)return;const y=(o??j()).id,C=Date.now(),P={id:$("assistant-template"),role:"assistant",text:`Loaded the ${f.title}. What would you like to change?`,status:"final",createdAt:C};x(y,A=>({...A,title:f.title,mode:"template",briefStatus:"generated",canvasState:"visible",draftBrief:void 0,lastAskedField:void 0,messages:[...A.messages,P],plannerState:Ye(f),plannerStateUpdatedAt:C})),E(y),s("")},[o,j,E,x]);return i?B?e.jsx("div",{className:"mx-auto w-full max-w-[1600px]",children:e.jsx(Le,{onSubmitPrompt:de,templates:K,onSelectTemplate:oe})}):e.jsx("div",{className:"mx-auto w-full max-w-[1600px]",children:e.jsx(ze,{showCanvas:!0,topBar:e.jsxs("section",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-gradient-to-br from-white via-slate-50 to-brand-light px-6 py-5 shadow-sm",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-brand-teal",children:"Strathwell AI"}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-between gap-3",children:[e.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Immersive Planner Workspace"}),e.jsxs(_,{variant:"secondary",className:"border border-slate-200 bg-white text-slate-700",children:[e.jsx(U,{className:"mr-1 h-3.5 w-3.5 text-brand-teal"}),S?"Co-pilot + Canvas shell active":"Co-pilot shell active"]})]}),e.jsx("p",{className:"mt-2 max-w-3xl text-sm text-slate-600",children:S?"Persistent co-pilot chat sits alongside a live canvas preview with independent scrolling regions.":"The canvas viewport is mounted in read-only mode and remains blank until a generated plan is available."})]}),copilot:e.jsx(Je,{messages:M,draftMessage:a,onDraftChange:s,onSend:le,onQuickPrompt:ie,disableSend:!a.trim(),isCreditsEnabled:u,credits:c,creditsPerMessage:l.creditsPerMessage,onAddDemoCredits:()=>r(50),onResetCredits:h,heightClass:"h-full min-h-0 rounded-none border-0 shadow-none"}),canvas:D()})}):e.jsx("div",{className:"flex min-h-[60vh] items-center justify-center",children:e.jsx(fe,{className:"h-6 w-6 animate-spin text-brand-dark/50"})})};export{tt as default};
