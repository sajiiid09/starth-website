import{r as s,p as T,U as S,t as d,j as e,y as j,O as t,B as U,I as h,Q as Y,W as D,X as G,Y as H,Z as n,A as J}from"./index-KrjukJeb.js";import{C as k,a as M,b as A,c as P}from"./card-tLMu1Ov7.js";import{S as x}from"./switch-HwOEIoQi.js";import{A as L,a as K,b as V}from"./avatar-tkolttA6.js";import{s as $}from"./Bell.es-BSDYVN2Y.js";import{n as Q}from"./Camera.es-CbxhcNz5.js";import{m as W}from"./FloppyDisk.es-BgK92nk8.js";const X=new Map([["bold",s.createElement(s.Fragment,null,s.createElement("path",{d:"M234.38,210a123.36,123.36,0,0,0-60.78-53.23,76,76,0,1,0-91.2,0A123.36,123.36,0,0,0,21.62,210a12,12,0,1,0,20.77,12c18.12-31.32,50.12-50,85.61-50s67.49,18.69,85.61,50a12,12,0,0,0,20.77-12ZM76,96a52,52,0,1,1,52,52A52.06,52.06,0,0,1,76,96Z"}))],["duotone",s.createElement(s.Fragment,null,s.createElement("path",{d:"M192,96a64,64,0,1,1-64-64A64,64,0,0,1,192,96Z",opacity:"0.2"}),s.createElement("path",{d:"M230.92,212c-15.23-26.33-38.7-45.21-66.09-54.16a72,72,0,1,0-73.66,0C63.78,166.78,40.31,185.66,25.08,212a8,8,0,1,0,13.85,8c18.84-32.56,52.14-52,89.07-52s70.23,19.44,89.07,52a8,8,0,1,0,13.85-8ZM72,96a56,56,0,1,1,56,56A56.06,56.06,0,0,1,72,96Z"}))],["fill",s.createElement(s.Fragment,null,s.createElement("path",{d:"M230.93,220a8,8,0,0,1-6.93,4H32a8,8,0,0,1-6.92-12c15.23-26.33,38.7-45.21,66.09-54.16a72,72,0,1,1,73.66,0c27.39,8.95,50.86,27.83,66.09,54.16A8,8,0,0,1,230.93,220Z"}))],["light",s.createElement(s.Fragment,null,s.createElement("path",{d:"M229.19,213c-15.81-27.32-40.63-46.49-69.47-54.62a70,70,0,1,0-63.44,0C67.44,166.5,42.62,185.67,26.81,213a6,6,0,1,0,10.38,6C56.4,185.81,90.34,166,128,166s71.6,19.81,90.81,53a6,6,0,1,0,10.38-6ZM70,96a58,58,0,1,1,58,58A58.07,58.07,0,0,1,70,96Z"}))],["regular",s.createElement(s.Fragment,null,s.createElement("path",{d:"M230.92,212c-15.23-26.33-38.7-45.21-66.09-54.16a72,72,0,1,0-73.66,0C63.78,166.78,40.31,185.66,25.08,212a8,8,0,1,0,13.85,8c18.84-32.56,52.14-52,89.07-52s70.23,19.44,89.07,52a8,8,0,1,0,13.85-8ZM72,96a56,56,0,1,1,56,56A56.06,56.06,0,0,1,72,96Z"}))],["thin",s.createElement(s.Fragment,null,s.createElement("path",{d:"M227.46,214c-16.52-28.56-43-48.06-73.68-55.09a68,68,0,1,0-51.56,0c-30.64,7-57.16,26.53-73.68,55.09a4,4,0,0,0,6.92,4C55,184.19,89.62,164,128,164s73,20.19,92.54,54a4,4,0,0,0,3.46,2,3.93,3.93,0,0,0,2-.54A4,4,0,0,0,227.46,214ZM68,96a60,60,0,1,1,60,60A60.07,60.07,0,0,1,68,96Z"}))]]),Z=s.forwardRef((g,u)=>s.createElement(T,{ref:u,...g,weights:X}));Z.displayName="UserIcon";const q=Z;function ie(){var E,b,F,w;const[g,u]=s.useState(null),[z,I]=s.useState(!0),[v,_]=s.useState(!1),[p,y]=s.useState(!1),[r,f]=s.useState({full_name:"",email:"",phone:"",organization_name:"",city:"",country:"",profile_picture_url:""}),[c,N]=s.useState({email_events:!0,email_marketing:!1,email_reminders:!0,sms_events:!1,sms_reminders:!0});s.useEffect(()=>{C()},[]);const C=async()=>{try{const a=await S.me();u(a),f({full_name:a.full_name||"",email:a.email||"",phone:a.phone||"",organization_name:a.organization_name||"",city:a.city||"",country:a.country||"",profile_picture_url:a.profile_picture_url||""}),N({...{email_events:!0,email_marketing:!1,email_reminders:!0,sms_events:!1,sms_reminders:!0},...a.notification_preferences||{}})}catch(a){console.error("Error fetching user data:",a),d.error("Failed to load profile data")}I(!1)},m=(a,l)=>{f(i=>({...i,[a]:l}))},o=(a,l)=>{N(i=>({...i,[a]:l}))},R=async a=>{const l=a.target.files[0];if(l){if(l.size>5*1024*1024){d.error("File size must be less than 5MB");return}y(!0);try{const{file_url:i}=await J({file:l});f(O=>({...O,profile_picture_url:i})),d.success("Profile picture uploaded successfully!")}catch(i){console.error("Error uploading image:",i),d.error("Failed to upload image")}y(!1)}},B=async()=>{_(!0);try{await S.updateMyUserData({full_name:r.full_name,phone:r.phone,organization_name:r.organization_name,city:r.city,country:r.country,profile_picture_url:r.profile_picture_url,notification_preferences:c}),d.success("Profile updated successfully!"),window.dispatchEvent(new CustomEvent("userProfileUpdated",{detail:{full_name:r.full_name,profile_picture_url:r.profile_picture_url}})),await C()}catch(a){console.error("Error saving profile:",a),d.error("Failed to update profile")}_(!1)};return z?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx(j,{className:"w-8 h-8 animate-spin text-gray-500"})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Profile Settings"}),e.jsx("p",{className:"text-gray-600",children:"Manage your account information and preferences"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(k,{className:"border-none shadow-lg",children:[e.jsx(M,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5 text-blue-600"}),"Profile Information"]})}),e.jsxs(P,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs(L,{className:"w-24 h-24",children:[e.jsx(K,{src:r.profile_picture_url}),e.jsx(V,{className:"text-xl",children:((b=(E=r.full_name)==null?void 0:E[0])==null?void 0:b.toUpperCase())||((w=(F=r.email)==null?void 0:F[0])==null?void 0:w.toUpperCase())||"U"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"profile_picture",className:"cursor-pointer",children:e.jsx(U,{variant:"outline",disabled:p,asChild:!0,children:e.jsx("span",{children:p?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Change Photo"]})})})}),e.jsx("input",{id:"profile_picture",type:"file",accept:"image/*",onChange:R,className:"hidden"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG up to 5MB"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"full_name",children:"Full Name"}),e.jsx(h,{id:"full_name",value:r.full_name,onChange:a=>m("full_name",a.target.value),placeholder:"Your full name"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"email",children:"Email Address"}),e.jsx(h,{id:"email",value:r.email,disabled:!0,className:"bg-gray-50"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"phone",children:"Phone Number"}),e.jsx(h,{id:"phone",value:r.phone,onChange:a=>m("phone",a.target.value),placeholder:"+1 (555) 123-4567"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"organization_name",children:"Organization"}),e.jsx(h,{id:"organization_name",value:r.organization_name,onChange:a=>m("organization_name",a.target.value),placeholder:"Your company name"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"city",children:"City"}),e.jsx(h,{id:"city",value:r.city,onChange:a=>m("city",a.target.value),placeholder:"Your city"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"country",children:"Country"}),e.jsxs(Y,{value:r.country,onValueChange:a=>m("country",a),children:[e.jsx(D,{children:e.jsx(G,{placeholder:"Select country"})}),e.jsxs(H,{children:[e.jsx(n,{value:"US",children:"United States"}),e.jsx(n,{value:"CA",children:"Canada"}),e.jsx(n,{value:"UK",children:"United Kingdom"}),e.jsx(n,{value:"AU",children:"Australia"}),e.jsx(n,{value:"DE",children:"Germany"}),e.jsx(n,{value:"FR",children:"France"}),e.jsx(n,{value:"ES",children:"Spain"}),e.jsx(n,{value:"IT",children:"Italy"}),e.jsx(n,{value:"JP",children:"Japan"}),e.jsx(n,{value:"OTHER",children:"Other"})]})]})]})]})]})]}),e.jsxs(k,{className:"border-none shadow-lg",children:[e.jsx(M,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-5 h-5 text-yellow-600"}),"Notification Preferences"]})}),e.jsxs(P,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Email Notifications"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"email_events",children:"Event Updates"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Notifications about your events"})]}),e.jsx(x,{id:"email_events",checked:c.email_events,onCheckedChange:a=>o("email_events",a)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"email_reminders",children:"Reminders"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Event and task reminders"})]}),e.jsx(x,{id:"email_reminders",checked:c.email_reminders,onCheckedChange:a=>o("email_reminders",a)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"email_marketing",children:"Marketing Updates"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Platform updates and tips"})]}),e.jsx(x,{id:"email_marketing",checked:c.email_marketing,onCheckedChange:a=>o("email_marketing",a)})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"SMS Notifications"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"sms_events",children:"Urgent Event Updates"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Last-minute event changes"})]}),e.jsx(x,{id:"sms_events",checked:c.sms_events,onCheckedChange:a=>o("sms_events",a)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"sms_reminders",children:"Event Reminders"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Reminders for upcoming events"})]}),e.jsx(x,{id:"sms_reminders",checked:c.sms_reminders,onCheckedChange:a=>o("sms_reminders",a)})]})]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(U,{onClick:B,disabled:v||p,className:"bg-blue-600 hover:bg-blue-700",children:v?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})})]})]})})}export{ie as default};
