import{aI as j,r as m,U as x,j as e,aJ as y,aK as b,aL as N,L as g,e as s,s as S,aM as w,aN as P,aO as U,aP as _,aQ as I,ag as L,a2 as O,ar as k,as as E,ay as M,aR as C,aS as J,B as R,aT as $}from"./index-KrjukJeb.js";import{c as D}from"./Envelope.es-BErI3QgS.js";import{s as G}from"./Shield.es-C51nR2_i.js";const H=[{title:"Overview",url:s("ProviderPortal"),icon:L,description:"Dashboard & key metrics"},{title:"Messages",url:s("ProviderMessages"),icon:D,description:"View & reply to leads"},{title:"Organization",url:s("ProviderOrganization"),icon:O,description:"Your business details"},{title:"Services",url:s("ProviderServices"),icon:k,description:"Manage your services"},{title:"Insurance",url:s("ProviderInsurance"),icon:G,description:"Your insurance policies"},{title:"Documents",url:s("ProviderDocuments"),icon:E,description:"Required uploads"},{title:"Settings",url:s("ProviderSettings"),icon:M,description:"Account & notifications"}];function B({children:f}){var n,l,c,d;const p=j(),[a,o]=m.useState(null);m.useEffect(()=>{h();const r=t=>{o(u=>{if(!u)return null;const i={...u};return t.detail.full_name!==void 0&&(i.full_name=t.detail.full_name),t.detail.profile_picture_url!==void 0&&(i.profile_picture_url=t.detail.profile_picture_url),sessionStorage.setItem("currentUser",JSON.stringify(i)),i})};return window.addEventListener("userProfileUpdated",r),()=>window.removeEventListener("userProfileUpdated",r)},[]);const h=async()=>{try{const r=sessionStorage.getItem("currentUser");if(r){o(JSON.parse(r));return}const t=await x.me();o(t),sessionStorage.setItem("currentUser",JSON.stringify(t))}catch(r){console.error("Error fetching user:",r),sessionStorage.removeItem("currentUser")}},v=async()=>{try{await x.logout()}catch(r){console.error("Logout error:",r)}finally{$(),sessionStorage.removeItem("currentUser"),localStorage.removeItem("activeRole"),window.location.href=s("Home")}};return e.jsx(y,{children:e.jsxs("div",{className:"min-h-screen flex w-full bg-gray-50",children:[e.jsxs(b,{className:"border-r border-gray-200",children:[e.jsx(N,{className:"border-b border-gray-200 p-6",children:e.jsxs(g,{to:s("Home"),className:"flex items-center gap-3 group",children:[e.jsx("div",{className:"w-10 h-10 bg-green-600 rounded-xl flex items-center justify-center",children:e.jsx(S,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-gray-900 text-lg",children:"Strathwell"}),e.jsx("p",{className:"text-xs text-green-600 font-medium",children:"Provider Portal"})]})]})}),e.jsx(w,{className:"p-3",children:e.jsxs(P,{children:[e.jsx(U,{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide px-3 py-2",children:"Provider Tools"}),e.jsx(_,{children:e.jsx(I,{children:H.map(r=>e.jsx(C,{children:e.jsxs(g,{to:r.url,className:`flex items-start gap-3 p-3 min-h-[60px] w-full rounded-lg mb-2 text-left hover:bg-green-50 hover:text-green-700 transition-colors ${p.pathname===r.url?"bg-green-50 text-green-700":"text-gray-600"}`,children:[e.jsx(r.icon,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium mb-1",children:r.title}),e.jsx("div",{className:"text-xs text-gray-500 leading-normal",children:r.description})]})]})},r.title))})})]})}),e.jsxs(J,{className:"border-t border-gray-200 p-4 space-y-3",children:[a&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden",children:a.profile_picture_url?e.jsx("img",{src:a.profile_picture_url,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-gray-700 font-semibold text-sm",children:((l=(n=a.full_name)==null?void 0:n[0])==null?void 0:l.toUpperCase())||((d=(c=a.email)==null?void 0:c[0])==null?void 0:d.toUpperCase())||"U"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm truncate",children:a.full_name||"User"}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:"Service Provider"})]})]}),e.jsx(R,{variant:"ghost",onClick:v,className:"w-full justify-start text-gray-600 hover:text-gray-900 hover:bg-gray-100 py-2",children:"Sign Out"})]})]}),e.jsx("main",{className:"flex-1 overflow-auto",children:f})]})})}export{B as P};
