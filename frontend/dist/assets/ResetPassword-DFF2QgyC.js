import{r as a,aI as b,j as s,O as w,I as p,B as d,y as S,b as C,L as f,e as j,t as o,bv as k}from"./index-KrjukJeb.js";import{C as L,a as R,b as E,c as I}from"./card-tLMu1Ov7.js";import{n as H}from"./Lock.es-Dnfko-u-.js";import{s as T}from"./XCircle.es-CSjnQLHJ.js";function A(){const[n,c]=a.useState("form"),[i,m]=a.useState(!1),[g,y]=a.useState(""),[t,N]=a.useState(""),[x,P]=a.useState(""),u=b();a.useEffect(()=>{const r=new URLSearchParams(u.search).get("token");if(!r){c("error");return}y(r)},[u]);const v=async e=>{var r,h;if(e.preventDefault(),t!==x){o.error("Passwords don't match");return}if(t.length<8){o.error("Password must be at least 8 characters");return}m(!0);try{const{data:l}=await k({token:g,new_password:t});l.success&&(c("success"),o.success("Password reset successfully!"))}catch(l){o.error(((h=(r=l.response)==null?void 0:r.data)==null?void 0:h.error)||"Password reset failed"),c("error")}m(!1)};return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:s.jsxs(L,{className:"max-w-md w-full",children:[s.jsx(R,{children:s.jsx(E,{className:"text-center text-2xl",children:"Reset Password"})}),s.jsxs(I,{className:"space-y-4",children:[n==="form"&&s.jsxs("form",{onSubmit:v,className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Enter your new password below"}),s.jsxs("div",{children:[s.jsx(w,{htmlFor:"password",children:"New Password"}),s.jsx(p,{id:"password",type:"password",value:t,onChange:e=>N(e.target.value),placeholder:"••••••••",required:!0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"At least 8 characters"})]}),s.jsxs("div",{children:[s.jsx(w,{htmlFor:"confirmPassword",children:"Confirm Password"}),s.jsx(p,{id:"confirmPassword",type:"password",value:x,onChange:e=>P(e.target.value),placeholder:"••••••••",required:!0})]}),s.jsxs(d,{type:"submit",className:"w-full",disabled:i,children:[i?s.jsx(S,{className:"w-4 h-4 animate-spin mr-2"}):s.jsx(H,{className:"w-4 h-4 mr-2"}),"Reset Password"]})]}),n==="success"&&s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx(C,{className:"w-16 h-16 text-green-600 mx-auto"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"Password Reset Successfully!"}),s.jsx("p",{className:"text-gray-600",children:"You can now sign in with your new password"}),s.jsx(f,{to:j("Home"),children:s.jsx(d,{className:"w-full",children:"Go to Sign In"})})]}),n==="error"&&s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx(T,{className:"w-16 h-16 text-red-600 mx-auto"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"Invalid or Expired Link"}),s.jsx("p",{className:"text-gray-600",children:"This password reset link is no longer valid"}),s.jsx(f,{to:j("Home"),children:s.jsx(d,{variant:"outline",className:"w-full",children:"Return to Home"})})]})]})]})})}export{A as default};
