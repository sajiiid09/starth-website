import{q as w,bP as L,R as b,bQ as $,j as r,O as n,I as x,bT as T,c,bU as A,T as f,bR as B,t as I}from"./index-KrjukJeb.js";import{C as y}from"./checkbox-uGjIcrta.js";import{V as O}from"./VendorStatusBanner-Ce0fnQuv.js";import{u as q,O as E}from"./useVendorOnboarding-B2-W8H0d.js";const F=["Individual","Company"],D=["Weekdays","Weekends"],V=["/images/marketplace/vendor-av.webp","/images/marketplace/vendor-catering.webp","https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400&h=300&fit=crop","/images/marketplace/vendor-floral.webp"],u=[{title:"Provider identity",subtitle:"Tell organizers who you are and where you operate."},{title:"Select services",subtitle:"Choose the services you provide."},{title:"Service details",subtitle:"Add capacity, pricing, and availability for each service."},{title:"Portfolio / proof",subtitle:"Share visuals and trust signals."},{title:"Review & submit",subtitle:"Confirm details before submitting for approval."}],G=()=>{const v=w(),l=L().vendorType;b.useEffect(()=>{l&&l!=="service_provider"&&v($(l),{replace:!0})},[v,l]);const{draft:s,isSaved:j,updateServiceDraft:d}=q(l),[t,g]=b.useState(0),[o,N]=b.useState({}),[h,k]=b.useState(s.serviceProvider.confirmation),p=(e,a)=>e.includes(a)?e.filter(i=>i!==a):[...e,a],P=()=>{const e={};return t===0&&(s.serviceProvider.identity.businessName||(e.businessName="Business name is required."),s.serviceProvider.identity.baseLocation||(e.baseLocation="Base location is required.")),t===1&&s.serviceProvider.services.length===0&&(e.services="Select at least one service."),t===2&&s.serviceProvider.services.forEach(a=>{const i=s.serviceProvider.serviceDetails[a];i!=null&&i.capacity||(e[`capacity-${a}`]="Capacity is required."),i!=null&&i.startingPrice||(e[`price-${a}`]="Starting price is required.")}),t===3&&s.serviceProvider.portfolio.images.length<3&&(e.portfolioImages="Select at least 3 images."),t===4&&!h&&(e.confirmation="Please confirm the details."),N(e),Object.keys(e).length===0},S=()=>{if(P()){if(t<u.length-1){g(e=>e+1);return}d({confirmation:h}),B("pending"),I.success("Submitted for admin approval."),v("/vendor/submission")}},C=()=>g(e=>Math.max(0,e-1)),m=(e,a)=>{d({serviceDetails:{...s.serviceProvider.serviceDetails,[e]:{capacity:"",startingPrice:"",includesEquipment:!1,availability:[],notes:"",...s.serviceProvider.serviceDetails[e],...a}}})};return r.jsxs("div",{className:"space-y-8",children:[r.jsx(O,{}),r.jsxs(E,{steps:u,currentStep:t,isSaved:j,onBack:C,onNext:S,canGoBack:t>0,canGoNext:!0,nextLabel:t===u.length-1?"Submit":"Next",children:[t===0&&r.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(n,{htmlFor:"businessName",children:"Business name"}),r.jsx(x,{id:"businessName",value:s.serviceProvider.identity.businessName,onChange:e=>d({identity:{...s.serviceProvider.identity,businessName:e.target.value}}),placeholder:"Lumen AV"}),o.businessName&&r.jsx("p",{className:"text-xs text-brand-coral",children:o.businessName})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(n,{htmlFor:"baseLocation",children:"Base location"}),r.jsx(x,{id:"baseLocation",value:s.serviceProvider.identity.baseLocation,onChange:e=>d({identity:{...s.serviceProvider.identity,baseLocation:e.target.value}}),placeholder:"Boston, MA"}),o.baseLocation&&r.jsx("p",{className:"text-xs text-brand-coral",children:o.baseLocation})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(n,{htmlFor:"coverageAreas",children:"Coverage areas"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:T.map(e=>{const a=s.serviceProvider.identity.coverageAreas.includes(e);return r.jsx("button",{type:"button",className:c("rounded-full border px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em]",a?"border-brand-dark bg-brand-dark text-brand-light":"border-brand-dark/20 bg-white text-brand-dark/60"),onClick:()=>d({identity:{...s.serviceProvider.identity,coverageAreas:p(s.serviceProvider.identity.coverageAreas,e)}}),children:e},e)})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(n,{htmlFor:"providerType",children:"Provider type"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:F.map(e=>r.jsx("button",{type:"button",className:c("rounded-full border px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em]",s.serviceProvider.identity.providerType===e?"border-brand-dark bg-brand-dark text-brand-light":"border-brand-dark/20 bg-white text-brand-dark/60"),onClick:()=>d({identity:{...s.serviceProvider.identity,providerType:e}}),children:e},e))})]})]}),t===1&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:A.map(e=>{const a=s.serviceProvider.services.includes(e);return r.jsx("button",{type:"button",className:c("rounded-2xl border px-4 py-4 text-left text-sm font-semibold transition",a?"border-brand-dark bg-brand-dark text-brand-light":"border-brand-dark/15 bg-white text-brand-dark/70 hover:border-brand-dark/40"),onClick:()=>{d({services:p(s.serviceProvider.services,e)})},children:e},e)})}),o.services&&r.jsx("p",{className:"text-xs text-brand-coral",children:o.services})]}),t===2&&r.jsx("div",{className:"space-y-4",children:s.serviceProvider.services.map(e=>{const a=s.serviceProvider.serviceDetails[e]||{capacity:"",startingPrice:"",includesEquipment:!1,availability:[],notes:""};return r.jsxs("div",{className:"rounded-2xl border border-white/40 bg-white/80 p-4",children:[r.jsx("p",{className:"text-sm font-semibold text-brand-dark",children:e}),r.jsxs("div",{className:"mt-4 grid gap-4 sm:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(n,{htmlFor:`capacity-${e}`,children:"Capacity"}),r.jsx(x,{id:`capacity-${e}`,value:a.capacity,onChange:i=>m(e,{capacity:i.target.value}),placeholder:"Up to 200 guests"}),o[`capacity-${e}`]&&r.jsx("p",{className:"text-xs text-brand-coral",children:o[`capacity-${e}`]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(n,{htmlFor:`price-${e}`,children:"Starting price"}),r.jsx(x,{id:`price-${e}`,value:a.startingPrice,onChange:i=>m(e,{startingPrice:i.target.value}),placeholder:"$1,500"}),o[`price-${e}`]&&r.jsx("p",{className:"text-xs text-brand-coral",children:o[`price-${e}`]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(y,{checked:a.includesEquipment,onCheckedChange:i=>m(e,{includesEquipment:!!i})}),r.jsx(n,{children:"Includes equipment"})]}),r.jsxs("div",{children:[r.jsx(n,{className:"mb-2 block",children:"Availability"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:D.map(i=>r.jsx("button",{type:"button",className:c("rounded-full border px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em]",a.availability.includes(i)?"border-brand-dark bg-brand-dark text-brand-light":"border-brand-dark/20 bg-white text-brand-dark/60"),onClick:()=>m(e,{availability:p(a.availability,i)}),children:i},i))})]}),r.jsxs("div",{className:"sm:col-span-2 space-y-1",children:[r.jsx(n,{htmlFor:`notes-${e}`,children:"Notes"}),r.jsx(f,{id:`notes-${e}`,value:a.notes,onChange:i=>m(e,{notes:i.target.value}),placeholder:"Highlight standout offerings or packages."})]})]})]},e)})}),t===3&&r.jsxs("div",{className:"space-y-4",children:[r.jsx(n,{className:"mb-2 block",children:"Select portfolio images (3-6)"}),r.jsx("div",{className:"grid gap-4 sm:grid-cols-3",children:V.map(e=>r.jsx("button",{type:"button",className:c("group overflow-hidden rounded-2xl border",s.serviceProvider.portfolio.images.includes(e)?"border-brand-teal":"border-transparent"),onClick:()=>d({portfolio:{...s.serviceProvider.portfolio,images:p(s.serviceProvider.portfolio.images,e)}}),children:r.jsx("img",{src:e,alt:"Portfolio",className:"h-28 w-full object-cover"})},e))}),o.portfolioImages&&r.jsx("p",{className:"text-xs text-brand-coral",children:o.portfolioImages}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(n,{htmlFor:"testimonial",children:"Testimonial (optional)"}),r.jsx(f,{id:"testimonial",value:s.serviceProvider.portfolio.testimonial,onChange:e=>d({portfolio:{...s.serviceProvider.portfolio,testimonial:e.target.value}}),placeholder:"“They made our event feel effortless and elevated.”"})]}),r.jsxs("div",{children:[r.jsx(n,{className:"mb-2 block",children:"Certifications"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:["Food safety","Licensed & insured","Union staff"].map(e=>r.jsx("button",{type:"button",className:c("rounded-full border px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em]",s.serviceProvider.portfolio.certifications.includes(e)?"border-brand-dark bg-brand-dark text-brand-light":"border-brand-dark/20 bg-white text-brand-dark/60"),onClick:()=>d({portfolio:{...s.serviceProvider.portfolio,certifications:p(s.serviceProvider.portfolio.certifications,e)}}),children:e},e))})]})]}),t===4&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"rounded-2xl border border-white/40 bg-white/80 p-4 text-sm text-brand-dark/70",children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-brand-dark/50",children:"Review summary"}),r.jsxs("p",{className:"mt-2",children:[s.serviceProvider.identity.businessName||"—"," ·"," ",s.serviceProvider.identity.baseLocation||"—"]}),r.jsxs("p",{className:"mt-1",children:["Services: ",s.serviceProvider.services.join(", ")||"—"]})]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-brand-dark/70",children:[r.jsx(y,{checked:h,onCheckedChange:e=>k(!!e),id:"confirmation"}),"I confirm information is accurate."]}),o.confirmation&&r.jsx("p",{className:"text-xs text-brand-coral",children:o.confirmation})]})]})]})};export{G as default};
