import{r as x,j as n,ad as S}from"./index-KrjukJeb.js";function w({item:s,type:c="venue",className:v="w-full h-48 object-cover",alt:y="Image"}){const[u,l]=x.useState(null),[h,p]=x.useState([]);x.useEffect(()=>{let o=!0;return(async()=>{var $;if(!o)return;const j=c==="venue"?`${(s==null?void 0:s.address)||(s==null?void 0:s.name)}, ${(s==null?void 0:s.city)||""}, ${(s==null?void 0:s.state)||""}`:`${s==null?void 0:s.name}, ${(s==null?void 0:s.city)||""}, ${(s==null?void 0:s.state)||""}`,d=`https://maps.googleapis.com/maps/api/streetview?size=800x600&location=${encodeURIComponent(j)}&key=AIzaSyBXvk9uBP6Z_6rVP9YWr4FQ3z7vYYx5qY4`,g=[c==="venue"?s==null?void 0:s.hero_photo_url:s==null?void 0:s.photo_url,s==null?void 0:s.image_url,s==null?void 0:s.photo_url,...(s==null?void 0:s.gallery_urls)||[],...(s==null?void 0:s.photos)||[],...(s==null?void 0:s.portfolio_photos)||[]].filter(r=>r&&typeof r=="string"&&r.startsWith("http"));if(g.length>0&&o){l(g[0]),p([g[0],d]);return}if(s!=null&&s.name&&(s!=null&&s.city)&&o)try{const r=c==="venue"?`${s.address||s.name}, ${s.city}, ${s.state||""}`:`${s.name}, ${s.city}, ${s.state||""}`,a=await S({place_id:s.google_place_id||null,name:s.name,location:r}),f=(($=a==null?void 0:a.data)==null?void 0:$.photos)||(a==null?void 0:a.photos)||[];if(f.length>0&&o){l(f[0]),p([f[0],d]);return}}catch{console.log(`Google photos unavailable for ${s==null?void 0:s.name}`)}o&&(l(d),p([d]))})(),()=>{o=!1}},[s==null?void 0:s.id,c]);const _=()=>{const o=h.indexOf(u);o<h.length-1?l(h[o+1]):l(null)};return n.jsx("div",{className:`${v} relative bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500`,style:{minHeight:"192px"},children:u?n.jsx("img",{src:u,alt:y||(s==null?void 0:s.name)||"Image",className:v,onError:_}):n.jsx("div",{className:"w-full h-full flex items-center justify-center p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-white text-2xl font-bold mb-2",children:(s==null?void 0:s.name)||"Business"}),(s==null?void 0:s.city)&&n.jsxs("div",{className:"text-white/80 text-sm",children:[s.city,", ",s.state]})]})})})}export{w as S};
