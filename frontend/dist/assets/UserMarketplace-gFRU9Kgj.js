import{r,j as e,y as T,bO as S,I as B,Q as c,W as i,X as o,Y as h,Z as a,B as v,a as E,aj as A}from"./index-KrjukJeb.js";import{s as Y}from"./Funnel.es-DlaRNzF0.js";import{f as D}from"./MagnifyingGlass.es-Dx2DBm8Z.js";import{g as H,f as L,M as O}from"./marketplaceFilter-DA4jIt28.js";import{f as P,d as M}from"./marketplace-BopvY0-7.js";const U=()=>{const[x,g]=r.useState([]),[I,F]=r.useState(!0),[n,p]=r.useState(""),[b,f]=r.useState(""),[l,d]=r.useState({state:"",city:"",category:"",eventType:""}),[u,N]=r.useState("relevance"),[y,V]=r.useState(!1);r.useEffect(()=>{async function s(){try{const t=await P();g(t.length>0?t:M)}catch{g(M)}finally{F(!1)}}s()},[]),r.useEffect(()=>{const s=window.setTimeout(()=>{f(n)},200);return()=>window.clearTimeout(s)},[n]);const m=r.useMemo(()=>n.trim().length>0||Object.values(l).some(s=>s.trim().length>0),[l,n]),k=r.useMemo(()=>H(x),[x]),j=r.useMemo(()=>m?L({items:x,searchQuery:b,filters:l,sortBy:u}):k,[x,b,k,l,m,u]),w=()=>{p(""),f(""),d({state:"",city:"",category:"",eventType:""}),N("relevance")},C=Object.values(l).filter(s=>s.trim().length>0).length;return I?e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsx(T,{className:"size-8 animate-spin text-brand-teal"})}):e.jsx("div",{className:"min-h-screen bg-gray-50/50 p-4 md:p-8",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-brand-teal",children:[e.jsx(S,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-semibold uppercase tracking-widest",children:"Marketplace"})]}),e.jsx("h1",{className:"mt-2 font-display text-3xl font-bold text-brand-dark md:text-4xl",children:"Find Venues & Vendors"}),e.jsx("p",{className:"mt-2 text-brand-dark/60",children:"Discover the perfect venues and service providers for your event."})]}),e.jsxs("div",{className:"mb-6 rounded-2xl border border-brand-dark/10 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(D,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-brand-dark/40"}),e.jsx(B,{value:n,onChange:s=>p(s.target.value),placeholder:"Search venues, services, or locations...",className:"h-11 rounded-xl border-brand-dark/10 bg-gray-50 pl-10"})]}),e.jsxs(c,{value:u,onValueChange:s=>N(s),children:[e.jsx(i,{className:"h-11 w-full rounded-xl border-brand-dark/10 md:w-44",children:e.jsx(o,{placeholder:"Sort by"})}),e.jsxs(h,{children:[e.jsx(a,{value:"relevance",children:"Relevance"}),e.jsx(a,{value:"price_low",children:"Price: Low to High"}),e.jsx(a,{value:"price_high",children:"Price: High to Low"}),e.jsx(a,{value:"rating",children:"Highest Rated"})]})]}),e.jsxs(v,{variant:"outline",className:"h-11 gap-2 rounded-xl",onClick:()=>V(!y),children:[e.jsx(Y,{className:"h-4 w-4"}),"Filters",C>0&&e.jsx(E,{className:"ml-1 h-5 w-5 rounded-full bg-brand-teal p-0 text-xs",children:C})]}),m&&e.jsxs(v,{variant:"ghost",size:"sm",className:"h-11 gap-1 text-brand-dark/60 hover:text-brand-dark",onClick:w,children:[e.jsx(A,{className:"h-4 w-4"}),"Clear all"]})]}),y&&e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3 border-t border-brand-dark/5 pt-4 md:grid-cols-4",children:[e.jsxs(c,{value:l.category,onValueChange:s=>d(t=>({...t,category:s})),children:[e.jsx(i,{className:"rounded-xl border-brand-dark/10",children:e.jsx(o,{placeholder:"Category"})}),e.jsxs(h,{children:[e.jsx(a,{value:"venue",children:"Venues"}),e.jsx(a,{value:"catering",children:"Catering"}),e.jsx(a,{value:"photography",children:"Photography"}),e.jsx(a,{value:"entertainment",children:"Entertainment"}),e.jsx(a,{value:"decor",children:"Decor & Florals"})]})]}),e.jsxs(c,{value:l.state,onValueChange:s=>d(t=>({...t,state:s})),children:[e.jsx(i,{className:"rounded-xl border-brand-dark/10",children:e.jsx(o,{placeholder:"State"})}),e.jsxs(h,{children:[e.jsx(a,{value:"MA",children:"Massachusetts"}),e.jsx(a,{value:"NY",children:"New York"}),e.jsx(a,{value:"CA",children:"California"})]})]}),e.jsxs(c,{value:l.city,onValueChange:s=>d(t=>({...t,city:s})),children:[e.jsx(i,{className:"rounded-xl border-brand-dark/10",children:e.jsx(o,{placeholder:"City"})}),e.jsxs(h,{children:[e.jsx(a,{value:"Boston",children:"Boston"}),e.jsx(a,{value:"Cambridge",children:"Cambridge"}),e.jsx(a,{value:"New York",children:"New York"})]})]}),e.jsxs(c,{value:l.eventType,onValueChange:s=>d(t=>({...t,eventType:s})),children:[e.jsx(i,{className:"rounded-xl border-brand-dark/10",children:e.jsx(o,{placeholder:"Event Type"})}),e.jsxs(h,{children:[e.jsx(a,{value:"wedding",children:"Wedding"}),e.jsx(a,{value:"corporate",children:"Corporate"}),e.jsx(a,{value:"social",children:"Social"}),e.jsx(a,{value:"conference",children:"Conference"})]})]})]})]}),e.jsx("div",{className:"mb-4 flex items-center justify-between text-sm text-brand-dark/60",children:e.jsx("span",{children:m?`${j.length} results found`:"Featured venues & vendors"})}),j.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border border-dashed border-brand-dark/20 bg-white py-16",children:[e.jsx(S,{className:"mb-4 h-12 w-12 text-brand-dark/20"}),e.jsx("h3",{className:"text-lg font-medium text-brand-dark/70",children:"No results found"}),e.jsx("p",{className:"mt-1 text-sm text-brand-dark/50",children:"Try adjusting your filters or search terms."}),e.jsx(v,{variant:"outline",className:"mt-4",onClick:w,children:"Clear all filters"})]}):e.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:j.map(s=>e.jsx("div",{className:"marketplace-card h-full",children:e.jsx(O,{item:s})},s.id))})]})})};export{U as default};
