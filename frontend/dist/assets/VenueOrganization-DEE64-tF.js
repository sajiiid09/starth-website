import{r as l,U as _,ao as u,j as e,y as j,a as U,a2 as B,O as c,I as o,Q as z,W as E,X as F,Y as I,Z as d,T as D,B as O}from"./index-KrjukJeb.js";import{C as R,a as V,b as A,c as L}from"./card-tLMu1Ov7.js";import{m as T}from"./FloppyDisk.es-BgK92nk8.js";import{R as p}from"./RoleGuard-DRkcvV5M.js";import{V as y}from"./VenuePortalLayout-DFmbwPeC.js";import"./Envelope.es-BErI3QgS.js";import"./Shield.es-C51nR2_i.js";function G(){const[r,v]=l.useState(null),[b,f]=l.useState(null),[w,C]=l.useState(!0),[h,m]=l.useState(!1),[a,x]=l.useState({name:"",website:"",city:"",country:"",business_license:"",description:""});l.useEffect(()=>{g()},[]);const g=async()=>{try{const s=await _.me();f(s);const n=await u.filter({owner_user_id:s.id,type:"venue_owner"});if(n.length>0){const t=n[0];v(t),x({name:t.name||"",website:t.website||"",city:t.city||"",country:t.country||"",business_license:t.business_license||"",description:t.description||""})}}catch(s){console.error("Error fetching organization:",s)}C(!1)},i=(s,n)=>{x(t=>({...t,[s]:n}))},N=async()=>{m(!0);try{r?await u.update(r.id,a):await u.create({...a,owner_user_id:b.id,type:"venue_owner"}),await g()}catch(s){console.error("Error saving organization:",s)}m(!1)},S=s=>{const n={draft:"bg-gray-100 text-gray-800",submitted:"bg-yellow-100 text-yellow-800",active:"bg-green-100 text-green-800",suspended:"bg-red-100 text-red-800"};return n[s]||n.draft};return w?e.jsx(p,{requiredRole:"venue_owner",children:e.jsx(y,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(j,{className:"w-8 h-8 animate-spin text-gray-500"})})})}):e.jsx(p,{requiredRole:"venue_owner",children:e.jsx(y,{children:e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Organization Profile"}),e.jsx("p",{className:"text-gray-600",children:"Manage your business details and information"})]}),r&&e.jsx(U,{className:S(r.status),children:r.status.charAt(0).toUpperCase()+r.status.slice(1)})]}),e.jsxs(R,{className:"border-none shadow-lg",children:[e.jsx(V,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5 text-blue-600"}),"Business Information"]})}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"name",children:"Business Name *"}),e.jsx(o,{id:"name",value:a.name,onChange:s=>i("name",s.target.value),placeholder:"Your venue business name"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"website",children:"Website"}),e.jsx(o,{id:"website",type:"url",value:a.website,onChange:s=>i("website",s.target.value),placeholder:"https://yourwebsite.com"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"city",children:"City *"}),e.jsx(o,{id:"city",value:a.city,onChange:s=>i("city",s.target.value),placeholder:"Business city"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"country",children:"Country *"}),e.jsxs(z,{value:a.country,onValueChange:s=>i("country",s),children:[e.jsx(E,{children:e.jsx(F,{placeholder:"Select country"})}),e.jsxs(I,{children:[e.jsx(d,{value:"US",children:"United States"}),e.jsx(d,{value:"CA",children:"Canada"}),e.jsx(d,{value:"UK",children:"United Kingdom"}),e.jsx(d,{value:"AU",children:"Australia"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"business_license",children:"Business License / EIN"}),e.jsx(o,{id:"business_license",value:a.business_license,onChange:s=>i("business_license",s.target.value),placeholder:"Business license number or EIN"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"description",children:"Business Description"}),e.jsx(D,{id:"description",value:a.description,onChange:s=>i("description",s.target.value),placeholder:"Describe your venue business...",rows:4})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(O,{onClick:N,disabled:h||!a.name||!a.city||!a.country,children:[h?e.jsx(j,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(T,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})]})]})})})}export{G as default};
