import{aI as j,r as m,U as x,j as e,aJ as y,aK as N,aL as v,L as p,e as s,s as w,aM as S,aN as U,aO as V,aP as _,aQ as I,ag as P,a2 as L,d as O,as as M,N as C,ay as E,aR as k,aS as $,B as A,aT as J}from"./index-KrjukJeb.js";import{c as R}from"./Envelope.es-BErI3QgS.js";import{s as B}from"./Shield.es-C51nR2_i.js";const D=[{title:"Overview",url:s("VenuePortal"),icon:P,description:"Dashboard and progress"},{title:"Messages",url:s("VenueMessages"),icon:R,description:"View and reply to inquiries"},{title:"Organization Profile",url:s("VenueOrganization"),icon:L,description:"Business details"},{title:"Venues",url:s("VenueListings"),icon:O,description:"Manage your venues"},{title:"Insurance",url:s("VenueInsurance"),icon:B,description:"Insurance policies"},{title:"Documents",url:s("VenueDocuments"),icon:M,description:"Required uploads"},{title:"Availability & Pricing",url:s("VenueAvailability"),icon:C,description:"Calendar and rates"},{title:"Settings",url:s("VenueSettings"),icon:E,description:"Account settings"}];function z({children:g}){var l,o,c,u;const f=j(),[a,n]=m.useState(null);m.useEffect(()=>{h();const r=t=>{n(d=>{if(!d)return null;const i={...d};return t.detail.full_name!==void 0&&(i.full_name=t.detail.full_name),t.detail.profile_picture_url!==void 0&&(i.profile_picture_url=t.detail.profile_picture_url),sessionStorage.setItem("currentUser",JSON.stringify(i)),i})};return window.addEventListener("userProfileUpdated",r),()=>window.removeEventListener("userProfileUpdated",r)},[]);const h=async()=>{try{const r=sessionStorage.getItem("currentUser");if(r){n(JSON.parse(r));return}const t=await x.me();n(t),sessionStorage.setItem("currentUser",JSON.stringify(t))}catch(r){console.error("Error fetching user:",r),sessionStorage.removeItem("currentUser")}},b=async()=>{try{await x.logout()}catch(r){console.error("Logout error:",r)}finally{J(),sessionStorage.removeItem("currentUser"),localStorage.removeItem("activeRole"),window.location.href=s("Home")}};return e.jsx(y,{children:e.jsxs("div",{className:"min-h-screen flex w-full bg-gray-50",children:[e.jsxs(N,{className:"border-r border-gray-200",children:[e.jsx(v,{className:"border-b border-gray-200 p-6",children:e.jsxs(p,{to:s("Home"),className:"flex items-center gap-3 group",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center",children:e.jsx(w,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-gray-900 text-lg",children:"Strathwell"}),e.jsx("p",{className:"text-xs text-blue-600 font-medium",children:"Venue Portal"})]})]})}),e.jsx(S,{className:"p-3",children:e.jsxs(U,{children:[e.jsx(V,{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide px-3 py-2",children:"Venue Management"}),e.jsx(_,{children:e.jsx(I,{children:D.map(r=>e.jsx(k,{children:e.jsxs(p,{to:r.url,className:`flex items-start gap-3 p-3 min-h-[60px] w-full rounded-lg mb-2 text-left hover:bg-blue-50 hover:text-blue-700 transition-colors ${f.pathname===r.url?"bg-blue-50 text-blue-700":"text-gray-600"}`,children:[e.jsx(r.icon,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium mb-1",children:r.title}),e.jsx("div",{className:"text-xs text-gray-500 leading-normal",children:r.description})]})]})},r.title))})})]})}),e.jsxs($,{className:"border-t border-gray-200 p-4 space-y-3",children:[a&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden",children:a.profile_picture_url?e.jsx("img",{src:a.profile_picture_url,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-gray-700 font-semibold text-sm",children:((o=(l=a.full_name)==null?void 0:l[0])==null?void 0:o.toUpperCase())||((u=(c=a.email)==null?void 0:c[0])==null?void 0:u.toUpperCase())||"U"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm truncate",children:a.full_name||"User"}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:"Venue Owner"})]})]}),e.jsx(A,{variant:"ghost",onClick:b,className:"w-full justify-start text-gray-600 hover:text-gray-900 hover:bg-gray-100 py-2",children:"Sign Out"})]})]}),e.jsx("main",{className:"flex-1 overflow-auto",children:g})]})})}export{z as V};
