import{K as r,bW as V,bX as B}from"./index-KrjukJeb.js";const T=(e,t)=>{const a=new URLSearchParams;Object.entries(t).forEach(([u,c])=>{c&&a.set(u,c)});const o=a.toString();return o?`${e}?${o}`:e},U={listVendors(e){const t=T("/admin/vendors",{status:e==null?void 0:e.status,q:e==null?void 0:e.q});return r("GET",t,{auth:!0})},getVendor(e){return r("GET",`/admin/vendors/${e}`,{auth:!0})},approveVendor(e){return e?r("POST",`/admin/vendors/${e}/approve`,{auth:!0}):Promise.reject(new Error("vendorId is required"))},needsChangesVendor(e,t){return e?t.trim()?r("POST",`/admin/vendors/${e}/needs-changes`,{auth:!0,body:{reason:t}}):Promise.reject(new Error("note is required")):Promise.reject(new Error("vendorId is required"))},disableVendorPayout(e,t){return e?r("POST",`/admin/vendors/${e}/disable-payout`,{auth:!0,body:{reason:t??""}}):Promise.reject(new Error("vendorId is required"))},listBookings(e){const t=T("/admin/bookings",{status:e==null?void 0:e.status,q:e==null?void 0:e.q});return r("GET",t,{auth:!0})},getBooking(e){return r("GET",`/admin/bookings/${e}`,{auth:!0})},listPayments(e){const t=T("/admin/payments",{status:e==null?void 0:e.status,q:e==null?void 0:e.q});return r("GET",t,{auth:!0})},listPayouts(e){const t=T("/admin/payouts",{status:e==null?void 0:e.status,q:e==null?void 0:e.q});return r("GET",t,{auth:!0})},approvePayout(e,t){return e?t.confirm?r("POST",`/admin/payouts/${e}/approve`,{auth:!0}):Promise.reject(new Error("confirm=true is required")):Promise.reject(new Error("payoutId is required"))},holdPayout(e,t){return e?r("POST",`/admin/payouts/${e}/hold`,{auth:!0,body:{reason:t??""}}):Promise.reject(new Error("payoutId is required"))},reversePayout(e,t){return e?r("POST",`/admin/payouts/${e}/reverse`,{auth:!0,body:{reason:t??""}}):Promise.reject(new Error("payoutId is required"))},getFinanceOverview(){return r("GET","/admin/finance/overview",{auth:!0})},getBookingFinanceSummary(e){return r("GET",`/admin/bookings/${e}/finance-summary`,{auth:!0})},listAuditLogs(e){const t=T("/admin/audit-logs",{q:e==null?void 0:e.q,action:e==null?void 0:e.action,resourceType:e==null?void 0:e.resourceType});return r("GET",t,{auth:!0})},listDisputes(e){const t=T("/admin/disputes",{status:e==null?void 0:e.status});return r("GET",t,{auth:!0})},getDispute(e){return r("GET",`/admin/disputes/${e}`,{auth:!0})},updateDisputeStatus(e,t){return e?r("POST",`/admin/disputes/${e}/status`,{auth:!0,body:{status:t}}):Promise.reject(new Error("disputeId is required"))},holdPayoutsForBooking(e,t){return e?r("POST",`/admin/bookings/${e}/hold-payouts`,{auth:!0,body:{reason:t??""}}):Promise.reject(new Error("bookingId is required"))},opsResetDummyData(){return r("POST","/admin/ops/reset-dummy-data",{auth:!0})},opsReconcileDummyPayments(){return r("POST","/admin/ops/reconcile-dummy-payments",{auth:!0})},resolveDispute(e){return e.disputeId?r("POST",`/admin/disputes/${e.disputeId}/resolve`,{auth:!0,body:{resolution:e.resolution,release_funds:e.resolution==="RESOLVED"}}):Promise.reject(new Error("disputeId is required"))}},L=[{id:"aud_6001",actor:"admin:sierra.woods",action:"VENDOR_APPROVED",resourceType:"VENDOR",resourceId:"vnd_1001",timestamp:"2026-01-12T20:14:00.000Z",ip:"98.214.121.44",userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 14_6_1)",metadata:{note:"Tax documentation verified"}},{id:"aud_6002",actor:"admin:noah.kim",action:"VENDOR_CHANGES_REQUESTED",resourceType:"VENDOR",resourceId:"vnd_1003",timestamp:"2026-01-26T16:45:00.000Z",ip:"73.55.82.13",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)",metadata:{note:"Insurance certificate expired"}},{id:"aud_6003",actor:"admin:olivia.ramirez",action:"PAYOUT_HELD",resourceType:"PAYOUT",resourceId:"pot_4006",timestamp:"2026-01-28T06:45:00.000Z",ip:"104.132.17.90",userAgent:"Mozilla/5.0 (X11; Linux x86_64)",metadata:{riskFlag:"mismatched_tax_id"}},{id:"aud_6004",actor:"admin:sierra.woods",action:"PAYOUT_APPROVED",resourceType:"PAYOUT",resourceId:"pot_4004",timestamp:"2026-02-01T08:22:00.000Z",ip:"98.214.121.44",userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 14_6_1)"},{id:"aud_6005",actor:"system:risk-engine",action:"DISPUTE_OPENED",resourceType:"DISPUTE",resourceId:"dsp_5002",timestamp:"2026-01-31T03:05:00.000Z",ip:"10.0.0.8",userAgent:"risk-engine/2.1.0"}],M=[{id:"bkg_2001",vendorId:"vnd_1001",vendorName:"Harborlight Loft",customerId:"cus_9001",organizerName:"Fintech Forward",eventName:"Fintech Growth Summit",state:"COMPLETED",venueCity:"San Francisco",startsAt:"2025-12-10T16:00:00.000Z",endsAt:"2025-12-10T23:30:00.000Z",totalAmountCents:54e4,milestones:[{id:"mil_2001_1",label:"Booking created",description:"Organizer submitted event requirements.",timestamp:"2025-11-02T18:10:00.000Z"},{id:"mil_2001_2",label:"Vendor approved",description:"Vendor accepted terms and pricing.",timestamp:"2025-11-03T09:20:00.000Z"},{id:"mil_2001_3",label:"Reservation paid",description:"Initial payment captured successfully.",timestamp:"2025-11-03T11:01:00.000Z"},{id:"mil_2001_4",label:"Event completed",description:"Event completed without incidents.",timestamp:"2025-12-11T01:40:00.000Z"}],createdAt:"2025-11-02T18:10:00.000Z",updatedAt:"2025-12-11T01:40:00.000Z"},{id:"bkg_2002",vendorId:"vnd_1002",vendorName:"Copper Fern Catering",customerId:"cus_9002",organizerName:"Nora & Ellis Wedding",eventName:"Northside Wedding Reception",state:"READY_FOR_PAYMENT",venueCity:"Chicago",startsAt:"2026-03-21T19:00:00.000Z",endsAt:"2026-03-22T02:00:00.000Z",totalAmountCents:88e4,milestones:[{id:"mil_2002_1",label:"Booking created",description:"Organizer requested catering and staffing.",timestamp:"2026-01-28T12:00:00.000Z"},{id:"mil_2002_2",label:"Vendor approved",description:"Vendor approved custom menu quote.",timestamp:"2026-01-30T08:34:00.000Z"}],createdAt:"2026-01-28T12:00:00.000Z",updatedAt:"2026-01-30T08:34:00.000Z"},{id:"bkg_2003",vendorId:"vnd_1003",vendorName:"Atlas Stageworks",customerId:"cus_9003",organizerName:"Prism Labs",eventName:"Product Launch Night",state:"COUNTERED",venueCity:"New York",startsAt:"2026-02-20T22:00:00.000Z",endsAt:"2026-02-21T03:00:00.000Z",totalAmountCents:46e4,milestones:[{id:"mil_2003_1",label:"Booking created",description:"Organizer requested stage build and streaming.",timestamp:"2026-01-21T09:12:00.000Z"},{id:"mil_2003_2",label:"Counter offer submitted",description:"Vendor countered with revised crew hours.",timestamp:"2026-01-24T16:02:00.000Z"}],createdAt:"2026-01-21T09:12:00.000Z",updatedAt:"2026-01-24T16:02:00.000Z"},{id:"bkg_2004",vendorId:"vnd_1004",vendorName:"Juniper Hall",customerId:"cus_9004",organizerName:"Asteria Health",eventName:"Healthcare Leadership Offsite",state:"ACTIVE",venueCity:"Seattle",startsAt:"2026-02-02T17:30:00.000Z",endsAt:"2026-02-03T00:30:00.000Z",totalAmountCents:72e4,milestones:[{id:"mil_2004_1",label:"Booking created",description:"Organizer secured venue with breakout rooms.",timestamp:"2025-12-22T13:35:00.000Z"},{id:"mil_2004_2",label:"Ready for payment",description:"Contract accepted and invoice issued.",timestamp:"2026-01-30T17:50:00.000Z"},{id:"mil_2004_3",label:"Event active",description:"Event currently in progress.",timestamp:"2026-02-02T17:32:00.000Z"}],createdAt:"2025-12-22T13:35:00.000Z",updatedAt:"2026-02-02T17:32:00.000Z"},{id:"bkg_2005",vendorId:"vnd_1005",vendorName:"Bluebird AV Collective",customerId:"cus_9005",organizerName:"ScaleUp Ventures",eventName:"Startup Demo Day",state:"VENDOR_APPROVED",venueCity:"Austin",startsAt:"2026-02-26T18:00:00.000Z",endsAt:"2026-02-27T00:00:00.000Z",totalAmountCents:39e4,milestones:[{id:"mil_2005_1",label:"Booking created",description:"Organizer requested full AV package.",timestamp:"2026-01-29T19:18:00.000Z"},{id:"mil_2005_2",label:"Vendor approved",description:"Vendor approved package and timeline.",timestamp:"2026-01-31T20:50:00.000Z"}],createdAt:"2026-01-29T19:18:00.000Z",updatedAt:"2026-01-31T20:50:00.000Z"},{id:"bkg_2006",vendorId:"vnd_1006",vendorName:"Granite Ridge Pavilion",customerId:"cus_9006",organizerName:"Mountain Education Fund",eventName:"Mountain Education Gala",state:"CREATED",venueCity:"Denver",startsAt:"2026-04-11T23:00:00.000Z",endsAt:"2026-04-12T04:00:00.000Z",totalAmountCents:61e4,milestones:[{id:"mil_2006_1",label:"Booking created",description:"Initial request submitted.",timestamp:"2026-01-31T07:45:00.000Z"}],createdAt:"2026-01-31T07:45:00.000Z",updatedAt:"2026-01-31T07:45:00.000Z"},{id:"bkg_2007",vendorId:"vnd_1001",vendorName:"Harborlight Loft",customerId:"cus_9007",organizerName:"West Harbor Brands",eventName:"Summer Brand Retreat",state:"CANCELED",venueCity:"San Francisco",startsAt:"2026-01-15T20:00:00.000Z",endsAt:"2026-01-16T03:00:00.000Z",totalAmountCents:51e4,cancellationReason:"Organizer canceled due to severe weather advisory.",canceledAt:"2026-01-10T12:00:00.000Z",milestones:[{id:"mil_2007_1",label:"Booking created",description:"Organizer reserved venue for retreat.",timestamp:"2025-12-28T10:42:00.000Z"},{id:"mil_2007_2",label:"Booking canceled",description:"Canceled ahead of event date.",timestamp:"2026-01-10T12:00:00.000Z"}],createdAt:"2025-12-28T10:42:00.000Z",updatedAt:"2026-01-10T12:00:00.000Z"}],q=[{id:"dsp_5001",bookingId:"bkg_2001",vendorId:"vnd_1001",reason:"Guest count exceeded contracted occupancy by 48 attendees.",status:"RESOLVED",createdAt:"2025-12-12T07:22:00.000Z",updatedAt:"2025-12-15T13:55:00.000Z"},{id:"dsp_5002",bookingId:"bkg_2004",vendorId:"vnd_1004",reason:"Chargeback filed after event due to alleged AV failure.",status:"UNDER_REVIEW",createdAt:"2026-01-31T03:05:00.000Z",updatedAt:"2026-02-01T19:40:00.000Z"},{id:"dsp_5003",bookingId:"bkg_2007",vendorId:"vnd_1001",reason:"Cancellation fee disputed due to weather emergency claim.",status:"OPEN",createdAt:"2026-01-11T15:10:00.000Z",updatedAt:"2026-01-11T15:10:00.000Z"}],F=[{id:"pay_3001",bookingId:"bkg_2002",customerId:"cus_9002",amountCents:264e3,currency:"USD",status:"REQUIRES_PAYMENT_METHOD",paymentMethodType:"card",providerRef:"pi_mock_3001",createdAt:"2026-01-30T08:40:00.000Z",updatedAt:"2026-01-30T08:40:00.000Z"},{id:"pay_3002",bookingId:"bkg_2003",customerId:"cus_9003",amountCents:138e3,currency:"USD",status:"REQUIRES_CONFIRMATION",paymentMethodType:"card",providerRef:"pi_mock_3002",createdAt:"2026-01-24T16:10:00.000Z",updatedAt:"2026-01-24T16:40:00.000Z"},{id:"pay_3003",bookingId:"bkg_2004",customerId:"cus_9004",amountCents:216e3,currency:"USD",status:"PROCESSING",paymentMethodType:"bank_transfer",providerRef:"pi_mock_3003",createdAt:"2026-02-01T22:00:00.000Z",updatedAt:"2026-02-01T22:05:00.000Z"},{id:"pay_3004",bookingId:"bkg_2001",customerId:"cus_9001",amountCents:162e3,currency:"USD",status:"SUCCEEDED",paymentMethodType:"card",providerRef:"pi_mock_3004",createdAt:"2025-11-03T11:00:00.000Z",updatedAt:"2025-11-03T11:01:00.000Z"},{id:"pay_3005",bookingId:"bkg_2007",customerId:"cus_9007",amountCents:153e3,currency:"USD",status:"CANCELED",paymentMethodType:"card",providerRef:"pi_mock_3005",createdAt:"2025-12-29T14:00:00.000Z",updatedAt:"2026-01-10T12:02:00.000Z"},{id:"pay_3006",bookingId:"bkg_2005",customerId:"cus_9005",amountCents:117e3,currency:"USD",status:"SUCCEEDED",paymentMethodType:"card",providerRef:"pi_mock_3006",createdAt:"2026-01-31T20:20:00.000Z",updatedAt:"2026-01-31T20:21:00.000Z"}],$=[{id:"pot_4001",vendorId:"vnd_1001",vendorName:"Harborlight Loft",bookingId:"bkg_2001",paymentId:"pay_3004",type:"RESERVATION",status:"PAID",amountCents:145800,currency:"USD",requestedAt:"2025-11-03T13:10:00.000Z",updatedAt:"2025-11-04T08:15:00.000Z"},{id:"pot_4002",vendorId:"vnd_1004",vendorName:"Juniper Hall",bookingId:"bkg_2004",paymentId:"pay_3003",type:"RESERVATION",status:"PENDING_ADMIN_APPROVAL",amountCents:194400,currency:"USD",requestedAt:"2026-02-01T23:15:00.000Z",updatedAt:"2026-02-01T23:15:00.000Z"},{id:"pot_4003",vendorId:"vnd_1002",vendorName:"Copper Fern Catering",bookingId:"bkg_2002",paymentId:"pay_3001",type:"RESERVATION",status:"REQUESTED",amountCents:224400,currency:"USD",requestedAt:"2026-01-31T10:02:00.000Z",updatedAt:"2026-01-31T10:02:00.000Z"},{id:"pot_4004",vendorId:"vnd_1005",vendorName:"Bluebird AV Collective",bookingId:"bkg_2005",paymentId:"pay_3006",type:"RESERVATION",status:"APPROVED",amountCents:105300,currency:"USD",requestedAt:"2026-01-31T21:00:00.000Z",updatedAt:"2026-02-01T08:22:00.000Z"},{id:"pot_4005",vendorId:"vnd_1004",vendorName:"Juniper Hall",bookingId:"bkg_2007",paymentId:"pay_3005",type:"FINAL",status:"REVERSED",amountCents:137700,currency:"USD",requestedAt:"2026-01-08T14:11:00.000Z",updatedAt:"2026-01-12T09:35:00.000Z"},{id:"pot_4006",vendorId:"vnd_1003",vendorName:"Atlas Stageworks",bookingId:"bkg_2003",paymentId:"pay_3002",type:"RESERVATION",status:"HELD",amountCents:124200,currency:"USD",requestedAt:"2026-01-25T19:30:00.000Z",updatedAt:"2026-01-28T06:45:00.000Z"},{id:"pot_4007",vendorId:"vnd_1001",vendorName:"Harborlight Loft",bookingId:"bkg_2001",paymentId:"pay_3004",type:"FINAL",status:"PAID",amountCents:259200,currency:"USD",requestedAt:"2025-12-11T02:00:00.000Z",updatedAt:"2025-12-12T09:10:00.000Z"}],G=[{id:"vnd_1001",displayName:"Harborlight Loft",subtype:"VENUE_OWNER",verificationState:"APPROVED",contactName:"Ari Bennett",contactEmail:"ops@harborlightloft.com",contactPhone:"+1-415-555-0101",city:"San Francisco",state:"CA",createdAt:"2025-09-11T17:18:00.000Z",updatedAt:"2026-01-12T20:14:00.000Z",payoutEnabled:!0,rating:4.8,completedBookings:61,venueDetails:{squareFeet:8500,venueType:"Industrial Loft",address:"200 Embarcadero St, San Francisco, CA 94111",capacityNotes:"Ideal for 220 seated guests, up to 300 standing with mixed lounge layout."},submission:{submittedAt:"2025-09-11T17:18:00.000Z",submittedBy:"Ari Bennett",documents:["Business license","COI","W-9"],lastUpdatedAt:"2026-01-12T20:14:00.000Z"}},{id:"vnd_1002",displayName:"Copper Fern Catering",subtype:"SERVICE_PROVIDER",verificationState:"PENDING",contactName:"Mina Doyle",contactEmail:"mina@copperfern.co",contactPhone:"+1-312-555-0102",city:"Chicago",state:"IL",createdAt:"2025-12-03T09:40:00.000Z",updatedAt:"2026-01-30T14:22:00.000Z",payoutEnabled:!1,rating:0,completedBookings:0,serviceDetails:{categories:["Catering","Beverage Service","Dessert Stations"],serviceAreas:["Chicago","Evanston","Oak Park","Naperville"]},submission:{submittedAt:"2025-12-03T09:40:00.000Z",submittedBy:"Mina Doyle",documents:["Business license","ServSafe certificate","W-9"],lastUpdatedAt:"2026-01-30T14:22:00.000Z"}},{id:"vnd_1003",displayName:"Atlas Stageworks",subtype:"SERVICE_PROVIDER",verificationState:"NEEDS_CHANGES",contactName:"Jon Park",contactEmail:"hello@atlasstageworks.com",contactPhone:"+1-646-555-0103",city:"New York",state:"NY",createdAt:"2025-10-21T13:55:00.000Z",updatedAt:"2026-01-26T16:45:00.000Z",payoutEnabled:!1,rating:4.3,completedBookings:12,serviceDetails:{categories:["AV Production","Stage Design","Lighting"],serviceAreas:["Manhattan","Brooklyn","Jersey City"]},submission:{submittedAt:"2025-10-21T13:55:00.000Z",submittedBy:"Jon Park",documents:["Business license","Insurance certificate"],lastUpdatedAt:"2026-01-26T16:45:00.000Z",note:"Please upload a renewed insurance certificate with valid expiration date."}},{id:"vnd_1004",displayName:"Juniper Hall",subtype:"VENUE_OWNER",verificationState:"DISABLED_PAYOUT",contactName:"Priya Shah",contactEmail:"finance@juniperhall.events",contactPhone:"+1-206-555-0104",city:"Seattle",state:"WA",createdAt:"2025-07-08T11:20:00.000Z",updatedAt:"2026-01-29T18:08:00.000Z",payoutEnabled:!1,rating:4.6,completedBookings:44,venueDetails:{squareFeet:10200,venueType:"Modern Ballroom",address:"98 Cedar Ave, Seattle, WA 98101",capacityNotes:"300 banquet style, 420 standing; strict sound limit after 10:00 PM."},submission:{submittedAt:"2025-07-08T11:20:00.000Z",submittedBy:"Priya Shah",documents:["Business license","COI","W-9","Void check"],lastUpdatedAt:"2026-01-29T18:08:00.000Z",note:"Payouts disabled due to banking mismatch under review."}},{id:"vnd_1005",displayName:"Bluebird AV Collective",subtype:"SERVICE_PROVIDER",verificationState:"APPROVED",contactName:"Evan Cole",contactEmail:"team@bluebirdav.io",contactPhone:"+1-512-555-0105",city:"Austin",state:"TX",createdAt:"2025-08-14T10:02:00.000Z",updatedAt:"2026-01-17T07:50:00.000Z",payoutEnabled:!0,rating:4.9,completedBookings:83,serviceDetails:{categories:["Live Audio","LED Walls","Hybrid Streaming"],serviceAreas:["Austin","Round Rock","San Marcos"]},submission:{submittedAt:"2025-08-14T10:02:00.000Z",submittedBy:"Evan Cole",documents:["Business license","COI","W-9"],lastUpdatedAt:"2026-01-17T07:50:00.000Z"}},{id:"vnd_1006",displayName:"Granite Ridge Pavilion",subtype:"VENUE_OWNER",verificationState:"PENDING",contactName:"Lena Morris",contactEmail:"admin@graniteridgepavilion.com",contactPhone:"+1-303-555-0106",city:"Denver",state:"CO",createdAt:"2026-01-18T12:28:00.000Z",updatedAt:"2026-01-31T09:31:00.000Z",payoutEnabled:!1,rating:0,completedBookings:0,venueDetails:{squareFeet:6200,venueType:"Mountain Pavilion",address:"14 Aspen Ridge Rd, Denver, CO 80203",capacityNotes:"180 seated or 260 standing; weather contingency tent available."},submission:{submittedAt:"2026-01-18T12:28:00.000Z",submittedBy:"Lena Morris",documents:["Business license","Temporary event permit"],lastUpdatedAt:"2026-01-31T09:31:00.000Z"}}],H=120,N=["REQUESTED","PENDING_ADMIN_APPROVAL","HELD"],C=["APPROVED","PAID"],d=e=>JSON.parse(JSON.stringify(e));let P=[],v=[],E=[],l=[],b=[],D=[];const k=()=>{P=d(G),v=d(M),E=d(F),l=d($),b=d(q),D=d(L)};k();const s=()=>new Promise(e=>window.setTimeout(e,H)),A=()=>new Date().toISOString(),g=e=>{D=[{id:`aud_runtime_${Date.now()}_${Math.floor(Math.random()*1e3)}`,timestamp:A(),...e},...D]},O=e=>{const t=P.find(a=>a.id===e);if(!t)throw new Error(`Vendor ${e} not found`);return t},Z=e=>{const t=v.find(a=>a.id===e);if(!t)throw new Error(`Booking ${e} not found`);return t},Y=e=>{const t=l.find(a=>a.id===e);if(!t)throw new Error(`Payout ${e} not found`);return t},w=e=>{const t=b.find(a=>a.id===e);if(!t)throw new Error(`Dispute ${e} not found`);return t},h=(e,t,a,o,u)=>{const c=O(e);return c.verificationState=t,c.payoutEnabled=o,c.updatedAt=A(),c.submission.lastUpdatedAt=c.updatedAt,u&&(c.submission.note=u),g({actor:"admin:mock-user",action:a,resourceType:"VENDOR",resourceId:c.id,ip:"127.0.0.1",userAgent:"mock-admin-ui/1.0",metadata:u?{note:u}:void 0}),d(c)},_=(e,t,a)=>{const o=t==null?void 0:t.trim().toLowerCase();return o?e.filter(u=>a(u).toLowerCase().includes(o)):e},z=e=>{const t=Z(e),a=E.find(n=>n.bookingId===e)??null,o=l.filter(n=>n.bookingId===e).sort((n,y)=>new Date(n.requestedAt).getTime()-new Date(y.requestedAt).getTime()),u=o.filter(n=>N.includes(n.status)).reduce((n,y)=>n+y.amountCents,0),c=o.filter(n=>C.includes(n.status)).reduce((n,y)=>n+y.amountCents,0),S=o.filter(n=>n.status==="REVERSED").reduce((n,y)=>n+y.amountCents,0),i=[];return a&&i.push({id:`led_pay_${a.id}`,label:`Payment ${a.status.toLowerCase().replace(/_/g," ")}`,category:"PAYMENT",amountCents:a.amountCents,occurredAt:a.updatedAt}),o.forEach(n=>{if(N.includes(n.status)){i.push({id:`led_hold_${n.id}`,label:`${n.type.toLowerCase()} payout held`,category:"HELD",amountCents:n.amountCents,occurredAt:n.updatedAt});return}if(C.includes(n.status)){i.push({id:`led_release_${n.id}`,label:`${n.type.toLowerCase()} payout released`,category:"RELEASED",amountCents:n.amountCents,occurredAt:n.updatedAt});return}n.status==="REVERSED"&&i.push({id:`led_reverse_${n.id}`,label:`${n.type.toLowerCase()} payout reversed`,category:"REVERSAL",amountCents:n.amountCents,occurredAt:n.updatedAt})}),i.sort((n,y)=>new Date(n.occurredAt).getTime()-new Date(y.occurredAt).getTime()),{bookingId:e,bookingTotalCents:t.totalAmountCents,payment:a,payouts:d(o),heldFundsCents:u,releasedFundsCents:c,reversedFundsCents:S,ledger:i}},I=(e,t,a,o)=>{const u=Y(e);return u.status=t,u.updatedAt=A(),g({actor:"admin:mock-user",action:a,resourceType:"PAYOUT",resourceId:u.id,ip:"127.0.0.1",userAgent:"mock-admin-ui/1.0",metadata:o?{note:o}:void 0}),d(u)},R=(e,t)=>{const a=w(e);return a.status=t,a.updatedAt=A(),g({actor:"admin:mock-user",action:`DISPUTE_${t}`,resourceType:"DISPUTE",resourceId:a.id,ip:"127.0.0.1",userAgent:"mock-admin-ui/1.0"}),d(a)},j={async listVendors(e){await s();const t=e!=null&&e.status?P.filter(a=>a.verificationState===e.status):P;return d(_(t,e==null?void 0:e.q,a=>[a.displayName,a.contactEmail,a.contactName,a.city,a.state].join(" ")))},async getVendor(e){return await s(),d(O(e))},async approveVendor(e){return await s(),h(e,"APPROVED","VENDOR_APPROVED",!0)},async needsChangesVendor(e,t){return await s(),h(e,"NEEDS_CHANGES","VENDOR_CHANGES_REQUESTED",!1,t)},async disableVendorPayout(e,t){return await s(),h(e,"DISABLED_PAYOUT","VENDOR_PAYOUT_DISABLED",!1,t)},async listBookings(e){await s();const t=e!=null&&e.status?v.filter(a=>a.state===e.status):v;return d(_(t,e==null?void 0:e.q,a=>[a.id,a.organizerName,a.vendorName,a.eventName,a.venueCity].join(" ")))},async getBooking(e){return await s(),d(Z(e))},async listPayments(e){await s();const t=e!=null&&e.status?E.filter(a=>a.status===e.status):E;return d(_(t,e==null?void 0:e.q,a=>[a.id,a.bookingId,a.providerRef,a.status].join(" ")))},async listPayouts(e){await s();const t=e!=null&&e.status?l.filter(a=>a.status===e.status):l;return d(_(t,e==null?void 0:e.q,a=>[a.id,a.bookingId,a.vendorId,a.vendorName,a.type,a.status].join(" ")))},async approvePayout(e,t){if(await s(),!t.confirm)throw new Error("Payout approval requires explicit confirmation.");return I(e,"APPROVED","PAYOUT_APPROVED","Approved by admin review")},async holdPayout(e,t){return await s(),I(e,"HELD","PAYOUT_HELD",t)},async reversePayout(e,t){return await s(),I(e,"REVERSED","PAYOUT_REVERSED",t)},async getFinanceOverview(){await s();const e=l.filter(i=>N.includes(i.status)).reduce((i,n)=>i+n.amountCents,0),t=l.filter(i=>i.status==="PAID").reduce((i,n)=>i+n.amountCents,0),a=l.filter(i=>["REQUESTED","PENDING_ADMIN_APPROVAL"].includes(i.status)).length,o=new Date,u=o.getUTCFullYear(),c=o.getUTCMonth(),S=v.filter(i=>{const n=new Date(i.startsAt);return i.state==="ACTIVE"&&n.getUTCFullYear()===u&&n.getUTCMonth()===c}).length;return{totalHeldFundsCents:e,totalPaidOutCents:t,pendingPayoutsCount:a,activeBookingsThisMonth:S,recentActivity:d(D.slice(0,8))}},async getBookingFinanceSummary(e){return await s(),z(e)},async listAuditLogs(e){await s();let t=D;return e!=null&&e.action&&(t=t.filter(a=>a.action===e.action)),e!=null&&e.resourceType&&(t=t.filter(a=>a.resourceType===e.resourceType)),t=_(t,e==null?void 0:e.q,a=>[a.actor,a.action,a.resourceType,a.resourceId,JSON.stringify(a.metadata??{})].join(" ")),d(t)},async listDisputes(e){await s();const t=e!=null&&e.status?b.filter(a=>a.status===e.status):b;return d(t)},async getDispute(e){return await s(),d(w(e))},async updateDisputeStatus(e,t){return await s(),R(e,t)},async holdPayoutsForBooking(e,t){await s();const a=l.filter(o=>o.bookingId===e&&o.status!=="PAID"&&o.status!=="REVERSED");return a.forEach(o=>{o.status="HELD",o.updatedAt=A()}),g({actor:"admin:mock-user",action:"BOOKING_PAYOUTS_HELD",resourceType:"BOOKING",resourceId:e,ip:"127.0.0.1",userAgent:"mock-admin-ui/1.0",metadata:{reason:t,heldPayoutIds:a.map(o=>o.id)}}),d(a)},async opsResetDummyData(){return await s(),k(),g({actor:"admin:mock-user",action:"OPS_DEMO_SEED_RESET",resourceType:"BOOKING",resourceId:"demo-datasets",ip:"127.0.0.1",userAgent:"mock-admin-ui/1.0"}),{resetAt:A()}},async opsReconcileDummyPayments(){if(await s(),E.length===0)throw new Error("No payments available for reconciliation.");const e=Math.floor(Math.random()*E.length),t=E[e],a=t.status;return t.status="CORRECTED",t.updatedAt=A(),g({actor:"admin:mock-user",action:"OPS_RECONCILIATION_RUN",resourceType:"PAYMENT",resourceId:t.id,ip:"127.0.0.1",userAgent:"mock-admin-ui/1.0",metadata:{previousStatus:a,newStatus:t.status}}),{paymentId:t.id,status:t.status}},async resolveDispute(e){await s();const t=e.resolution==="RESOLVED"?"RESOLVED":"REJECTED";return R(e.disputeId,t)}},m=V?j:U,p=(e,t)=>async(...a)=>{if(B)throw new Error(`Admin read-only mode is enabled. ${e} is disabled.`);return t(...a)},x={...m,approveVendor:p("approveVendor",m.approveVendor),needsChangesVendor:p("needsChangesVendor",m.needsChangesVendor),disableVendorPayout:p("disableVendorPayout",m.disableVendorPayout),approvePayout:p("approvePayout",m.approvePayout),holdPayout:p("holdPayout",m.holdPayout),reversePayout:p("reversePayout",m.reversePayout),updateDisputeStatus:p("updateDisputeStatus",m.updateDisputeStatus),holdPayoutsForBooking:p("holdPayoutsForBooking",m.holdPayoutsForBooking),opsResetDummyData:p("opsResetDummyData",m.opsResetDummyData),opsReconcileDummyPayments:p("opsReconcileDummyPayments",m.opsReconcileDummyPayments),resolveDispute:p("resolveDispute",m.resolveDispute)};export{x as a};
